import{r as a,j as e,U as V,t as Ee,u as mn,a as pn,b as fn,c as me,S as xn}from"./app-C8Sg5s2D.js";import{L as Ce}from"./Layout-DUeHlWHd.js";import{a as Ae,B as _,I as L}from"./index-C-S3fGAe.js";import{C as H,a as J,b as X,e as re,c as Z}from"./card-CopSugPh.js";import{u as we,F as Re,a as G,b as P,c as T,d as E,e as $,s as Se,z as w}from"./index-DX6dFVOm.js";import{L as W}from"./label-sEb2dTbR.js";import{a as hn,b as Ie}from"./use-initials-DV9zzRH8.js";import{S as pe}from"./separator-CYLCqqUC.js";import{f as K}from"./formatters-BdPsR_AQ.js";import{P as _e}from"./package-BJgREm61.js";import{T as gn}from"./truck-Q1hKBVaM.js";import{L as fe}from"./loader-circle-C6lYJXhs.js";import{C as jn}from"./credit-card-D7pfOsAo.js";/* empty css            */import"./map-pin-BkobWDjU.js";import"./badge-sxevUz_k.js";function O(n,t,{checkForDefaultPrevented:s=!0}={}){return function(o){if(n==null||n(o),s===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function Pe(n,t){if(typeof n=="function")return n(t);n!=null&&(n.current=t)}function Me(...n){return t=>{let s=!1;const r=n.map(o=>{const c=Pe(o,t);return!s&&typeof c=="function"&&(s=!0),c});if(s)return()=>{for(let o=0;o<r.length;o++){const c=r[o];typeof c=="function"?c():Pe(n[o],null)}}}}function z(...n){return a.useCallback(Me(...n),n)}function ae(n,t=[]){let s=[];function r(c,l){const m=a.createContext(l),d=s.length;s=[...s,l];const p=x=>{var b;const{scope:j,children:u,...v}=x,y=((b=j==null?void 0:j[n])==null?void 0:b[d])||m,h=a.useMemo(()=>v,Object.values(v));return e.jsx(y.Provider,{value:h,children:u})};p.displayName=c+"Provider";function f(x,j){var y;const u=((y=j==null?void 0:j[n])==null?void 0:y[d])||m,v=a.useContext(u);if(v)return v;if(l!==void 0)return l;throw new Error(`\`${x}\` must be used within \`${c}\``)}return[p,f]}const o=()=>{const c=s.map(l=>a.createContext(l));return function(m){const d=(m==null?void 0:m[n])||c;return a.useMemo(()=>({[`__scope${n}`]:{...m,[n]:d}}),[m,d])}};return o.scopeName=n,[r,bn(o,...t)]}function bn(...n){const t=n[0];if(n.length===1)return t;const s=()=>{const r=n.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(c){const l=r.reduce((m,{useScope:d,scopeName:p})=>{const x=d(c)[`__scope${p}`];return{...m,...x}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return s.scopeName=t.scopeName,s}function he(n){const t=vn(n),s=a.forwardRef((r,o)=>{const{children:c,...l}=r,m=a.Children.toArray(c),d=m.find(Nn);if(d){const p=d.props.children,f=m.map(x=>x===d?a.Children.count(p)>1?a.Children.only(null):a.isValidElement(p)?p.props.children:null:x);return e.jsx(t,{...l,ref:o,children:a.isValidElement(p)?a.cloneElement(p,void 0,f):null})}return e.jsx(t,{...l,ref:o,children:c})});return s.displayName=`${n}.Slot`,s}function vn(n){const t=a.forwardRef((s,r)=>{const{children:o,...c}=s;if(a.isValidElement(o)){const l=Cn(o),m=kn(c,o.props);return o.type!==a.Fragment&&(m.ref=r?Me(r,l):l),a.cloneElement(o,m)}return a.Children.count(o)>1?a.Children.only(null):null});return t.displayName=`${n}.SlotClone`,t}var yn=Symbol("radix.slottable");function Nn(n){return a.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===yn}function kn(n,t){const s={...t};for(const r in t){const o=n[r],c=t[r];/^on[A-Z]/.test(r)?o&&c?s[r]=(...m)=>{c(...m),o(...m)}:o&&(s[r]=o):r==="style"?s[r]={...o,...c}:r==="className"&&(s[r]=[o,c].filter(Boolean).join(" "))}return{...n,...s}}function Cn(n){var r,o;let t=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?n.ref:(t=(o=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:o.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?n.props.ref:n.props.ref||n.ref)}var wn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],q=wn.reduce((n,t)=>{const s=he(`Primitive.${t}`),r=a.forwardRef((o,c)=>{const{asChild:l,...m}=o,d=l?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...m,ref:c})});return r.displayName=`Primitive.${t}`,{...n,[t]:r}},{});function Rn(n){const t=n+"CollectionProvider",[s,r]=ae(t),[o,c]=s(t,{collectionRef:{current:null},itemMap:new Map}),l=y=>{const{scope:h,children:b}=y,C=V.useRef(null),g=V.useRef(new Map).current;return e.jsx(o,{scope:h,itemMap:g,collectionRef:C,children:b})};l.displayName=t;const m=n+"CollectionSlot",d=he(m),p=V.forwardRef((y,h)=>{const{scope:b,children:C}=y,g=c(m,b),N=z(h,g.collectionRef);return e.jsx(d,{ref:N,children:C})});p.displayName=m;const f=n+"CollectionItemSlot",x="data-radix-collection-item",j=he(f),u=V.forwardRef((y,h)=>{const{scope:b,children:C,...g}=y,N=V.useRef(null),S=z(h,N),I=c(f,b);return V.useEffect(()=>(I.itemMap.set(N,{ref:N,...g}),()=>void I.itemMap.delete(N))),e.jsx(j,{[x]:"",ref:S,children:C})});u.displayName=f;function v(y){const h=c(n+"CollectionConsumer",y);return V.useCallback(()=>{const C=h.collectionRef.current;if(!C)return[];const g=Array.from(C.querySelectorAll(`[${x}]`));return Array.from(h.itemMap.values()).sort((I,U)=>g.indexOf(I.ref.current)-g.indexOf(U.ref.current))},[h.collectionRef,h.itemMap])}return[{Provider:l,Slot:p,ItemSlot:u},v,r]}var ee=globalThis!=null&&globalThis.document?a.useLayoutEffect:()=>{},Sn=Ee[" useId ".trim().toString()]||(()=>{}),In=0;function _n(n){const[t,s]=a.useState(Sn());return ee(()=>{s(r=>r??String(In++))},[n]),t?`radix-${t}`:""}function Pn(n){const t=a.useRef(n);return a.useEffect(()=>{t.current=n}),a.useMemo(()=>(...s)=>{var r;return(r=t.current)==null?void 0:r.call(t,...s)},[])}var En=Ee[" useInsertionEffect ".trim().toString()]||ee;function Fe({prop:n,defaultProp:t,onChange:s=()=>{},caller:r}){const[o,c,l]=An({defaultProp:t,onChange:s}),m=n!==void 0,d=m?n:o;{const f=a.useRef(n!==void 0);a.useEffect(()=>{const x=f.current;x!==m&&console.warn(`${r} is changing from ${x?"controlled":"uncontrolled"} to ${m?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=m},[m,r])}const p=a.useCallback(f=>{var x;if(m){const j=Mn(f)?f(n):f;j!==n&&((x=l.current)==null||x.call(l,j))}else c(f)},[m,n,c,l]);return[d,p]}function An({defaultProp:n,onChange:t}){const[s,r]=a.useState(n),o=a.useRef(s),c=a.useRef(t);return En(()=>{c.current=t},[t]),a.useEffect(()=>{var l;o.current!==s&&((l=c.current)==null||l.call(c,s),o.current=s)},[s,o]),[s,r,c]}function Mn(n){return typeof n=="function"}var Fn=a.createContext(void 0);function Te(n){const t=a.useContext(Fn);return n||t||"ltr"}var xe="rovingFocusGroup.onEntryFocus",Tn={bubbles:!1,cancelable:!0},ne="RovingFocusGroup",[ge,Oe,On]=Rn(ne),[Dn,De]=ae(ne,[On]),[Ln,Gn]=Dn(ne),Le=a.forwardRef((n,t)=>e.jsx(ge.Provider,{scope:n.__scopeRovingFocusGroup,children:e.jsx(ge.Slot,{scope:n.__scopeRovingFocusGroup,children:e.jsx($n,{...n,ref:t})})}));Le.displayName=ne;var $n=a.forwardRef((n,t)=>{const{__scopeRovingFocusGroup:s,orientation:r,loop:o=!1,dir:c,currentTabStopId:l,defaultCurrentTabStopId:m,onCurrentTabStopIdChange:d,onEntryFocus:p,preventScrollOnEntryFocus:f=!1,...x}=n,j=a.useRef(null),u=z(t,j),v=Te(c),[y,h]=Fe({prop:l,defaultProp:m??null,onChange:d,caller:ne}),[b,C]=a.useState(!1),g=Pn(p),N=Oe(s),S=a.useRef(!1),[I,U]=a.useState(0);return a.useEffect(()=>{const k=j.current;if(k)return k.addEventListener(xe,g),()=>k.removeEventListener(xe,g)},[g]),e.jsx(Ln,{scope:s,orientation:r,dir:v,loop:o,currentTabStopId:y,onItemFocus:a.useCallback(k=>h(k),[h]),onItemShiftTab:a.useCallback(()=>C(!0),[]),onFocusableItemAdd:a.useCallback(()=>U(k=>k+1),[]),onFocusableItemRemove:a.useCallback(()=>U(k=>k-1),[]),children:e.jsx(q.div,{tabIndex:b||I===0?-1:0,"data-orientation":r,...x,ref:u,style:{outline:"none",...n.style},onMouseDown:O(n.onMouseDown,()=>{S.current=!0}),onFocus:O(n.onFocus,k=>{const B=!S.current;if(k.target===k.currentTarget&&B&&!b){const te=new CustomEvent(xe,Tn);if(k.currentTarget.dispatchEvent(te),!te.defaultPrevented){const A=N().filter(M=>M.focusable),ce=A.find(M=>M.active),Y=A.find(M=>M.id===y),se=[ce,Y,...A].filter(Boolean).map(M=>M.ref.current);Ke(se,f)}}S.current=!1}),onBlur:O(n.onBlur,()=>C(!1))})})}),Ge="RovingFocusGroupItem",$e=a.forwardRef((n,t)=>{const{__scopeRovingFocusGroup:s,focusable:r=!0,active:o=!1,tabStopId:c,children:l,...m}=n,d=_n(),p=c||d,f=Gn(Ge,s),x=f.currentTabStopId===p,j=Oe(s),{onFocusableItemAdd:u,onFocusableItemRemove:v,currentTabStopId:y}=f;return a.useEffect(()=>{if(r)return u(),()=>v()},[r,u,v]),e.jsx(ge.ItemSlot,{scope:s,id:p,focusable:r,active:o,children:e.jsx(q.span,{tabIndex:x?0:-1,"data-orientation":f.orientation,...m,ref:t,onMouseDown:O(n.onMouseDown,h=>{r?f.onItemFocus(p):h.preventDefault()}),onFocus:O(n.onFocus,()=>f.onItemFocus(p)),onKeyDown:O(n.onKeyDown,h=>{if(h.key==="Tab"&&h.shiftKey){f.onItemShiftTab();return}if(h.target!==h.currentTarget)return;const b=Bn(h,f.orientation,f.dir);if(b!==void 0){if(h.metaKey||h.ctrlKey||h.altKey||h.shiftKey)return;h.preventDefault();let g=j().filter(N=>N.focusable).map(N=>N.ref.current);if(b==="last")g.reverse();else if(b==="prev"||b==="next"){b==="prev"&&g.reverse();const N=g.indexOf(h.currentTarget);g=f.loop?Vn(g,N+1):g.slice(N+1)}setTimeout(()=>Ke(g))}}),children:typeof l=="function"?l({isCurrentTabStop:x,hasTabStop:y!=null}):l})})});$e.displayName=Ge;var Kn={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Un(n,t){return t!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function Bn(n,t,s){const r=Un(n.key,s);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Kn[r]}function Ke(n,t=!1){const s=document.activeElement;for(const r of n)if(r===s||(r.focus({preventScroll:t}),document.activeElement!==s))return}function Vn(n,t){return n.map((s,r)=>n[(t+r)%n.length])}var Wn=Le,zn=$e;function qn(n){const[t,s]=a.useState(void 0);return ee(()=>{if(n){s({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const c=o[0];let l,m;if("borderBoxSize"in c){const d=c.borderBoxSize,p=Array.isArray(d)?d[0]:d;l=p.inlineSize,m=p.blockSize}else l=n.offsetWidth,m=n.offsetHeight;s({width:l,height:m})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else s(void 0)},[n]),t}function Yn(n){const t=a.useRef({value:n,previous:n});return a.useMemo(()=>(t.current.value!==n&&(t.current.previous=t.current.value,t.current.value=n),t.current.previous),[n])}function Hn(n,t){return a.useReducer((s,r)=>t[s][r]??s,n)}var Ue=n=>{const{present:t,children:s}=n,r=Jn(t),o=typeof s=="function"?s({present:r.isPresent}):a.Children.only(s),c=z(r.ref,Xn(o));return typeof s=="function"||r.isPresent?a.cloneElement(o,{ref:c}):null};Ue.displayName="Presence";function Jn(n){const[t,s]=a.useState(),r=a.useRef(null),o=a.useRef(n),c=a.useRef("none"),l=n?"mounted":"unmounted",[m,d]=Hn(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return a.useEffect(()=>{const p=oe(r.current);c.current=m==="mounted"?p:"none"},[m]),ee(()=>{const p=r.current,f=o.current;if(f!==n){const j=c.current,u=oe(p);n?d("MOUNT"):u==="none"||(p==null?void 0:p.display)==="none"?d("UNMOUNT"):d(f&&j!==u?"ANIMATION_OUT":"UNMOUNT"),o.current=n}},[n,d]),ee(()=>{if(t){let p;const f=t.ownerDocument.defaultView??window,x=u=>{const y=oe(r.current).includes(u.animationName);if(u.target===t&&y&&(d("ANIMATION_END"),!o.current)){const h=t.style.animationFillMode;t.style.animationFillMode="forwards",p=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=h)})}},j=u=>{u.target===t&&(c.current=oe(r.current))};return t.addEventListener("animationstart",j),t.addEventListener("animationcancel",x),t.addEventListener("animationend",x),()=>{f.clearTimeout(p),t.removeEventListener("animationstart",j),t.removeEventListener("animationcancel",x),t.removeEventListener("animationend",x)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(m),ref:a.useCallback(p=>{r.current=p?getComputedStyle(p):null,s(p)},[])}}function oe(n){return(n==null?void 0:n.animationName)||"none"}function Xn(n){var r,o;let t=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?n.ref:(t=(o=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:o.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?n.props.ref:n.props.ref||n.ref)}var be="Radio",[Zn,Be]=ae(be),[Qn,et]=Zn(be),Ve=a.forwardRef((n,t)=>{const{__scopeRadio:s,name:r,checked:o=!1,required:c,disabled:l,value:m="on",onCheck:d,form:p,...f}=n,[x,j]=a.useState(null),u=z(t,h=>j(h)),v=a.useRef(!1),y=x?p||!!x.closest("form"):!0;return e.jsxs(Qn,{scope:s,checked:o,disabled:l,children:[e.jsx(q.button,{type:"button",role:"radio","aria-checked":o,"data-state":Ye(o),"data-disabled":l?"":void 0,disabled:l,value:m,...f,ref:u,onClick:O(n.onClick,h=>{o||d==null||d(),y&&(v.current=h.isPropagationStopped(),v.current||h.stopPropagation())})}),y&&e.jsx(qe,{control:x,bubbles:!v.current,name:r,value:m,checked:o,required:c,disabled:l,form:p,style:{transform:"translateX(-100%)"}})]})});Ve.displayName=be;var We="RadioIndicator",ze=a.forwardRef((n,t)=>{const{__scopeRadio:s,forceMount:r,...o}=n,c=et(We,s);return e.jsx(Ue,{present:r||c.checked,children:e.jsx(q.span,{"data-state":Ye(c.checked),"data-disabled":c.disabled?"":void 0,...o,ref:t})})});ze.displayName=We;var nt="RadioBubbleInput",qe=a.forwardRef(({__scopeRadio:n,control:t,checked:s,bubbles:r=!0,...o},c)=>{const l=a.useRef(null),m=z(l,c),d=Yn(s),p=qn(t);return a.useEffect(()=>{const f=l.current;if(!f)return;const x=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(x,"checked").set;if(d!==s&&u){const v=new Event("click",{bubbles:r});u.call(f,s),f.dispatchEvent(v)}},[d,s,r]),e.jsx(q.input,{type:"radio","aria-hidden":!0,defaultChecked:s,...o,tabIndex:-1,ref:m,style:{...o.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});qe.displayName=nt;function Ye(n){return n?"checked":"unchecked"}var tt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ie="RadioGroup",[st,Rt]=ae(ie,[De,Be]),He=De(),Je=Be(),[rt,ot]=st(ie),Xe=a.forwardRef((n,t)=>{const{__scopeRadioGroup:s,name:r,defaultValue:o,value:c,required:l=!1,disabled:m=!1,orientation:d,dir:p,loop:f=!0,onValueChange:x,...j}=n,u=He(s),v=Te(p),[y,h]=Fe({prop:c,defaultProp:o??"",onChange:x,caller:ie});return e.jsx(rt,{scope:s,name:r,required:l,disabled:m,value:y,onValueChange:h,children:e.jsx(Wn,{asChild:!0,...u,orientation:d,dir:v,loop:f,children:e.jsx(q.div,{role:"radiogroup","aria-required":l,"aria-orientation":d,"data-disabled":m?"":void 0,dir:v,...j,ref:t})})})});Xe.displayName=ie;var Ze="RadioGroupItem",Qe=a.forwardRef((n,t)=>{const{__scopeRadioGroup:s,disabled:r,...o}=n,c=ot(Ze,s),l=c.disabled||r,m=He(s),d=Je(s),p=a.useRef(null),f=z(t,p),x=c.value===o.value,j=a.useRef(!1);return a.useEffect(()=>{const u=y=>{tt.includes(y.key)&&(j.current=!0)},v=()=>j.current=!1;return document.addEventListener("keydown",u),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",u),document.removeEventListener("keyup",v)}},[]),e.jsx(zn,{asChild:!0,...m,focusable:!l,active:x,children:e.jsx(Ve,{disabled:l,required:c.required,checked:x,...d,...o,name:c.name,ref:f,onCheck:()=>c.onValueChange(o.value),onKeyDown:O(u=>{u.key==="Enter"&&u.preventDefault()}),onFocus:O(o.onFocus,()=>{var u;j.current&&((u=p.current)==null||u.click())})})})});Qe.displayName=Ze;var at="RadioGroupIndicator",en=a.forwardRef((n,t)=>{const{__scopeRadioGroup:s,...r}=n,o=Je(s);return e.jsx(ze,{...o,...r,ref:t})});en.displayName=at;var nn=Xe,tn=Qe,it=en;const je=a.forwardRef(({className:n,...t},s)=>e.jsx(nn,{className:Ae("grid gap-2",n),...t,ref:s}));je.displayName=nn.displayName;const Q=a.forwardRef(({className:n,...t},s)=>e.jsx(tn,{ref:s,className:Ae("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),...t,children:e.jsx(it,{className:"flex items-center justify-center",children:e.jsx(hn,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Q.displayName=tn.displayName;const ct=w.object({fullName:w.string().min(3,{message:"Nama lengkap harus diisi"}),address:w.string().min(5,{message:"Alamat harus diisi"}),city:w.string().min(3,{message:"Kota harus diisi"}),postalCode:w.string().min(5,{message:"Kode pos harus diisi"}),province:w.string().min(3,{message:"Provinsi harus diisi"}),phone:w.string().min(10,{message:"Nomor telepon harus diisi dengan benar"}),email:w.string().email({message:"Format email tidak valid"}).optional()});w.object({addressType:w.enum(["new","saved"]),savedAddressId:w.number().optional(),saveAddress:w.boolean().optional(),setAsDefault:w.boolean().optional()});const lt=w.object({paymentMethod:w.enum(["bank_transfer","e_wallet"],{required_error:"Pilih metode pembayaran"})}),St=({cart:n,coupon:t,shippingOptions:s,savedAddresses:r,auth:o})=>{var Ne,ke;console.log("Checkout Props di render:",{cart:n,coupon:t,initialShippingOptions:s,shippingOptionsLength:s==null?void 0:s.length});const{cartItems:c,totalPrice:l,clearCart:m}=mn(),{activeCoupon:d,applyCoupon:p,removeCoupon:f,discountAmount:x,isLoading:j}=pn(),{shippingAddress:u,setShippingAddress:v,calculateShipping:y,selectShipping:h,selectedShipping:b,isCalculatingShipping:C}=fn(),[g,N]=a.useState("shipping"),[S,I]=a.useState(""),[U,k]=a.useState(!1),[B,te]=a.useState(r!=null&&r.length?"saved":"new"),[A,ce]=a.useState(((Ne=r==null?void 0:r.find(i=>i.is_default))==null?void 0:Ne.id)||((ke=r==null?void 0:r[0])==null?void 0:ke.id)||null),[Y,ve]=a.useState(!1),[se,M]=a.useState(!1),[ye,sn]=a.useState(s||[]);a.useEffect(()=>{s&&(console.log("Updating local shipping options:",s),sn(s))},[s]);const le=l,de=x(le),ue=b?b.price:0,rn=le-de+ue,F=we({resolver:Se(ct),defaultValues:u||{fullName:"",address:"",city:"",postalCode:"",province:"",phone:""}}),D=we({resolver:Se(lt),defaultValues:{paymentMethod:"bank_transfer"}}),on=()=>{if(!S){me("Kode kupon tidak boleh kosong",{description:"Silakan masukkan kode kupon"});return}p(S)},an=i=>{const R={fullName:i.fullName,address:i.address,city:i.city,postalCode:i.postalCode,province:i.province,phone:i.phone};v(R),N("delivery")},cn=()=>{u&&y(u.city,u.postalCode)},ln=i=>{h(i),N("payment")},dn=i=>{console.log("Payment method selected:",i.paymentMethod),N("review")},un=()=>{if(!b||!u){me("Informasi tidak lengkap",{description:"Silakan lengkapi semua informasi pengiriman dan pembayaran"});return}k(!0);const i={shipping_address:{full_name:u.fullName,address:u.address,city:u.city,province:u.province,postal_code:u.postalCode,phone:u.phone},shipping_method:{id:b.type,company:b.courier_name,name:b.courier_service_name,price:b.price},payment_method:D.getValues("paymentMethod"),...d!=null&&d.id?{coupon_id:d.id}:{},...u.email?{email:u.email}:{},notes:"",...B==="saved"&&A?{saved_address_id:A}:{},...B==="new"&&!(o!=null&&o.check)?{save_address:Y,set_as_default:se}:{}};xn.post("/checkout",i,{onSuccess:()=>{},onError:R=>{me.error("Gagal membuat pesanan",{description:R.message||"Terjadi kesalahan saat membuat pesanan"})},onFinish:()=>{k(!1)}})};return c.length===0?e.jsx(Ce,{children:e.jsx("div",{className:"container mx-auto px-4 py-16 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_e,{className:"mx-auto h-16 w-16 text-gray-400"}),e.jsx("h2",{className:"mt-2 text-2xl font-bold tracking-tight text-gray-900 sm:text-3xl",children:"Keranjang Belanja Kosong"}),e.jsx("p",{className:"mt-4 text-gray-500",children:"Anda belum menambahkan produk apapun ke keranjang belanja."}),e.jsx("div",{className:"mt-6",children:e.jsx(_,{asChild:!0,className:"bg-batik-indigo hover:bg-batik-indigo/90",children:e.jsx("a",{href:"/products",children:"Lihat Produk"})})})]})})}):(a.useEffect(()=>{I(d?d.code:"")},[d]),e.jsx(Ce,{children:e.jsx("div",{className:"container mx-auto px-4 py-12 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-8 gap-y-10 lg:grid-cols-12",children:[e.jsxs("div",{className:"lg:col-span-8",children:[e.jsxs("div",{className:"mb-10",children:[e.jsx("h1",{className:"text-batik-brown text-2xl font-bold tracking-tight",children:"Checkout"}),e.jsx("div",{className:"mt-4",children:e.jsx("nav",{className:"flex items-center justify-between",children:e.jsxs("ol",{className:"flex w-full items-center justify-between",children:[e.jsxs("li",{className:`flex items-center ${g==="shipping"?"text-batik-indigo font-medium":"text-gray-500"}`,children:[e.jsx("span",{className:`flex h-8 w-8 items-center justify-center rounded-full ${g==="shipping"?"bg-batik-indigo text-white":"bg-gray-100"}`,children:"1"}),e.jsx("span",{className:"ml-2 hidden sm:inline",children:"Pengiriman"})]}),e.jsx("div",{className:"mx-2 h-0.5 w-full flex-1 bg-gray-200"}),e.jsxs("li",{className:`flex items-center ${g==="delivery"?"text-batik-indigo font-medium":"text-gray-500"}`,children:[e.jsx("span",{className:`flex h-8 w-8 items-center justify-center rounded-full ${g==="delivery"?"bg-batik-indigo text-white":g==="payment"||g==="review"?"bg-green-500 text-white":"bg-gray-100"}`,children:g==="payment"||g==="review"?e.jsx(Ie,{className:"h-4 w-4"}):"2"}),e.jsx("span",{className:"ml-2 hidden sm:inline",children:"Pengiriman"})]}),e.jsx("div",{className:"mx-2 h-0.5 w-full flex-1 bg-gray-200"}),e.jsxs("li",{className:`flex items-center ${g==="payment"?"text-batik-indigo font-medium":"text-gray-500"}`,children:[e.jsx("span",{className:`flex h-8 w-8 items-center justify-center rounded-full ${g==="payment"?"bg-batik-indigo text-white":g==="review"?"bg-green-500 text-white":"bg-gray-100"}`,children:g==="review"?e.jsx(Ie,{className:"h-4 w-4"}):"3"}),e.jsx("span",{className:"ml-2 hidden sm:inline",children:"Pembayaran"})]}),e.jsx("div",{className:"mx-2 h-0.5 w-full flex-1 bg-gray-200"}),e.jsxs("li",{className:`flex items-center ${g==="review"?"text-batik-indigo font-medium":"text-gray-500"}`,children:[e.jsx("span",{className:`flex h-8 w-8 items-center justify-center rounded-full ${g==="review"?"bg-batik-indigo text-white":"bg-gray-100"}`,children:"4"}),e.jsx("span",{className:"ml-2 hidden sm:inline",children:"Konfirmasi"})]})]})})})]}),g==="shipping"&&e.jsxs(H,{children:[e.jsxs(J,{children:[e.jsxs(X,{className:"flex items-center",children:[e.jsx(_e,{className:"mr-2 h-5 w-5"}),"Informasi Pengiriman"]}),e.jsx(re,{children:"Masukkan alamat pengiriman untuk pesanan Anda"})]}),e.jsxs(Z,{children:[r&&r.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(W,{className:"text-base font-semibold",children:"Pilih Alamat"}),e.jsxs(je,{value:B,onValueChange:i=>te(i),className:"mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{value:"saved",id:"saved-address"}),e.jsx(W,{htmlFor:"saved-address",className:"font-normal",children:"Gunakan alamat tersimpan"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{value:"new",id:"new-address"}),e.jsx(W,{htmlFor:"new-address",className:"font-normal",children:"Gunakan alamat baru"})]})]})]}),B==="saved"&&e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsx(W,{className:"block text-sm font-medium",children:"Pilih alamat pengiriman"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:r.map(i=>e.jsxs("div",{className:`cursor-pointer rounded-lg border p-4 transition-colors ${A===i.id?"border-batik-indigo bg-batik-indigo/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>ce(i.id),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:i.full_name}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:i.phone})]}),i.is_default&&e.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700",children:"Default"})]}),e.jsxs("p",{className:"mt-2 text-sm text-gray-700",children:[i.address,", ",i.city,", ",i.province,", ",i.postal_code]})]},i.id))}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(_,{type:"button",disabled:!A,onClick:()=>{const i=r.find(R=>R.id===A);if(i){const R={fullName:i.full_name,address:i.address,city:i.city,province:i.province,postalCode:i.postal_code,phone:i.phone};v(R),N("delivery")}},className:"bg-batik-indigo hover:bg-batik-indigo/90",children:"Lanjutkan"})})]})]}),(B==="new"||!r||r.length===0)&&e.jsx(Re,{...F,children:e.jsxs("form",{onSubmit:F.handleSubmit(an),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsx(G,{control:F.control,name:"fullName",render:({field:i})=>e.jsxs(P,{children:[e.jsx(T,{children:"Nama Lengkap"}),e.jsx(E,{children:e.jsx(L,{placeholder:"Masukkan nama lengkap",...i})}),e.jsx($,{})]})}),e.jsx(G,{control:F.control,name:"phone",render:({field:i})=>e.jsxs(P,{children:[e.jsx(T,{children:"Nomor Telepon"}),e.jsx(E,{children:e.jsx(L,{placeholder:"contoh: 081234567890",...i})}),e.jsx($,{})]})}),!(o!=null&&o.check)&&e.jsx(G,{control:F.control,name:"email",render:({field:i})=>e.jsxs(P,{children:[e.jsx(T,{children:"Email"}),e.jsx(E,{children:e.jsx(L,{type:"email",placeholder:"Masukkan alamat email",...i})}),e.jsx($,{})]})}),e.jsx("div",{className:`${o!=null&&o.check?"sm:col-span-2":""}`,children:e.jsx(G,{control:F.control,name:"address",render:({field:i})=>e.jsxs(P,{children:[e.jsx(T,{children:"Alamat"}),e.jsx(E,{children:e.jsx(L,{placeholder:"Masukkan alamat lengkap",...i})}),e.jsx($,{})]})})}),e.jsx(G,{control:F.control,name:"city",render:({field:i})=>e.jsxs(P,{children:[e.jsx(T,{children:"Kota"}),e.jsx(E,{children:e.jsx(L,{placeholder:"Masukkan nama kota",...i})}),e.jsx($,{})]})}),e.jsx(G,{control:F.control,name:"province",render:({field:i})=>e.jsxs(P,{children:[e.jsx(T,{children:"Provinsi"}),e.jsx(E,{children:e.jsx(L,{placeholder:"Masukkan nama provinsi",...i})}),e.jsx($,{})]})}),e.jsx(G,{control:F.control,name:"postalCode",render:({field:i})=>e.jsxs(P,{children:[e.jsx(T,{children:"Kode Pos"}),e.jsx(E,{children:e.jsx(L,{placeholder:"contoh: 12345",...i})}),e.jsx($,{})]})})]}),r&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"save-address",checked:Y,onChange:i=>ve(i.target.checked),className:"text-batik-indigo focus:ring-batik-indigo h-4 w-4 rounded border-gray-300"}),e.jsx(W,{htmlFor:"save-address",className:"text-sm leading-none font-medium",children:"Simpan alamat ini untuk pembelian selanjutnya"})]}),Y&&e.jsxs("div",{className:"ml-6 flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"set-default",checked:se,onChange:i=>M(i.target.checked),className:"text-batik-indigo focus:ring-batik-indigo h-4 w-4 rounded border-gray-300"}),e.jsx(W,{htmlFor:"set-default",className:"text-sm leading-none font-medium",children:"Jadikan sebagai alamat utama"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(_,{type:"submit",className:"bg-batik-indigo hover:bg-batik-indigo/90",children:"Lanjutkan"})})]})})]})]}),g==="delivery"&&e.jsxs(H,{children:[e.jsxs(J,{children:[e.jsxs(X,{className:"flex items-center",children:[e.jsx(gn,{className:"mr-2 h-5 w-5"}),"Opsi Pengiriman"]}),e.jsx(re,{children:"Pilih metode pengiriman yang Anda inginkan"})]}),e.jsx(Z,{children:ye.length===0?e.jsxs("div",{className:"py-6 text-center",children:[e.jsx(_,{onClick:cn,disabled:C,className:"bg-batik-indigo hover:bg-batik-indigo/90",children:C?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"mr-2 h-4 w-4 animate-spin"}),"Menghitung..."]}):"Hitung Ongkos Kirim"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Klik tombol di atas untuk menghitung ongkos kirim ke alamat Anda"})]}):e.jsx("div",{className:"space-y-4",children:ye.map(i=>{const R=b&&b.courier_code===i.courier_code&&b.courier_service_code===i.courier_service_code;return e.jsxs("div",{className:`hover:border-batik-indigo/50 flex cursor-pointer items-center justify-between rounded-lg border p-4 transition-colors ${R?"border-batik-indigo bg-batik-indigo/5":"border-gray-200"}`,onClick:()=>ln(i),children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`flex h-6 w-6 items-center justify-center rounded-full border-2 ${R?"border-batik-indigo":"border-gray-300"}`,children:R&&e.jsx("div",{className:"bg-batik-indigo h-3 w-3 rounded-full"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"font-medium",children:[i.courier_name," - ",i.courier_service_name]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("p",{children:i.description}),e.jsxs("p",{children:["Estimasi: ",i.duration]})]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-batik-indigo font-medium",children:K(i.price)})})]},`${i.courier_code}-${i.courier_service_code}`)})})})]}),g==="payment"&&e.jsxs(H,{children:[e.jsxs(J,{children:[e.jsxs(X,{className:"flex items-center",children:[e.jsx(jn,{className:"mr-2 h-5 w-5"}),"Metode Pembayaran"]}),e.jsx(re,{children:"Pilih metode pembayaran yang Anda inginkan"})]}),e.jsx(Z,{children:e.jsx(Re,{...D,children:e.jsxs("form",{onSubmit:D.handleSubmit(dn),className:"space-y-6",children:[e.jsx(G,{control:D.control,name:"paymentMethod",render:({field:i})=>e.jsxs(P,{className:"space-y-3",children:[e.jsx(E,{children:e.jsxs(je,{onValueChange:i.onChange,defaultValue:i.value,className:"space-y-3",children:[e.jsxs(P,{className:"flex items-center space-y-0 space-x-3 rounded-lg border p-4",children:[e.jsx(E,{children:e.jsx(Q,{value:"bank_transfer"})}),e.jsx(T,{className:"flex-1 cursor-pointer font-normal",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Transfer Bank"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Bayar melalui transfer bank (BCA, Mandiri, BNI, BRI)"})]})})]}),e.jsxs(P,{className:"flex items-center space-y-0 space-x-3 rounded-lg border p-4",children:[e.jsx(E,{children:e.jsx(Q,{value:"e_wallet"})}),e.jsx(T,{className:"flex-1 cursor-pointer font-normal",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"E-Wallet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Bayar menggunakan e-wallet (OVO, GoPay, DANA, LinkAja)"})]})})]})]})}),e.jsx($,{})]})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(_,{variant:"outline",onClick:()=>N("delivery"),children:"Kembali"}),e.jsx(_,{type:"submit",className:"bg-batik-indigo hover:bg-batik-indigo/90",children:"Lanjutkan"})]})]})})})]}),g==="review"&&e.jsxs(H,{children:[e.jsxs(J,{children:[e.jsx(X,{children:"Konfirmasi Pesanan"}),e.jsx(re,{children:"Tinjau pesanan Anda sebelum melakukan pembayaran"})]}),e.jsxs(Z,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-batik-brown mb-2 font-semibold",children:"Alamat Pengiriman"}),e.jsx("div",{className:"rounded-lg border p-4",children:u&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-medium",children:u.fullName}),e.jsx("p",{className:"text-sm text-gray-600",children:u.phone}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:[u.address,", ",u.city,", ",u.province," ",u.postalCode]})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-batik-brown mb-2 font-semibold",children:"Metode Pengiriman"}),e.jsx("div",{className:"rounded-lg border p-4",children:b&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"font-medium",children:[b.company," - ",b.courier_name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Estimasi ",b.duration]}),e.jsx("p",{className:"text-batik-indigo mt-1 text-sm font-medium",children:K(b.price)})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-batik-brown mb-2 font-semibold",children:"Metode Pembayaran"}),e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsxs("p",{className:"font-medium",children:[D.getValues("paymentMethod")==="bank_transfer"&&"Transfer Bank",D.getValues("paymentMethod")==="e_wallet"&&"E-Wallet"]}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:[D.getValues("paymentMethod")==="bank_transfer"&&"Instruksi pembayaran akan dikirim melalui email",D.getValues("paymentMethod")==="e_wallet"&&"Anda akan diarahkan ke halaman pembayaran"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-batik-brown mb-2 font-semibold",children:"Produk yang Dibeli"}),e.jsx("div",{className:"space-y-4",children:c.map(i=>e.jsxs("div",{className:"flex items-center justify-between border-b pb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:i.image,alt:i.name,className:"h-20 w-20 rounded-md object-cover object-center"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"font-medium",children:i.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Jumlah: ",i.quantity]})]})]}),e.jsx("p",{className:"font-medium",children:K(i.price*i.quantity)})]},i.id))})]}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[e.jsx(_,{variant:"outline",onClick:()=>N("payment"),children:"Kembali"}),e.jsx(_,{onClick:un,disabled:U,className:"bg-batik-indigo hover:bg-batik-indigo/90",children:U?"Memproses...":"Buat Pesanan"})]})]})]})]}),e.jsx("div",{className:"lg:col-span-4",children:e.jsx("div",{className:"sticky top-24",children:e.jsxs(H,{children:[e.jsx(J,{children:e.jsx(X,{children:"Ringkasan Pesanan"})}),e.jsxs(Z,{className:"space-y-4",children:[e.jsx("div",{className:"space-y-2",children:c.map(i=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[i.name," ",e.jsxs("span",{className:"text-gray-500",children:["x",i.quantity]})]}),e.jsx("span",{children:K(i.price*i.quantity)})]},i.id))}),e.jsx(pe,{}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"coupon",children:"Kode Kupon"}),e.jsxs("div",{className:"mt-1 flex",children:[e.jsx(L,{id:"coupon",placeholder:"Masukkan kode kupon",value:S,onChange:i=>I(i.target.value),disabled:!!d,className:"rounded-r-none"}),d?e.jsx(_,{onClick:f,variant:"outline",className:"rounded-l-none border-l-0",disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx("span",{children:"Menghapus..."})]}):"Hapus"}):e.jsx(_,{onClick:on,variant:"outline",className:"rounded-l-none border-l-0",disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx("span",{children:"Menerapkan..."})]}):"Terapkan"})]}),d&&e.jsxs("p",{className:"mt-1 text-xs text-green-600",children:["Kupon ",d.code," diterapkan - Diskon ",d.discount_percent,"%"]})]}),e.jsx(pe,{}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Subtotal"}),e.jsx("span",{children:K(le)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Diskon"}),e.jsx("span",{children:de>0?`- ${K(de)}`:"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Pengiriman"}),e.jsx("span",{children:ue>0?K(ue):"-"})]})]}),e.jsx(pe,{}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:K(rn)})]})]})]})})})]})})}))};export{St as default};
