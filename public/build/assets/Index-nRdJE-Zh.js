import{r as n,j as e,L as f}from"./app-CYDLR7DQ.js";import{I as m,B as y}from"./index-C6SDhB8v.js";import{C as _,a as w,b,e as v,c as L}from"./card-NVK-lCst.js";import{L as d}from"./label-Br-Y0vsU.js";import{S as C,a as N,b as S,c as k,d as l}from"./select-BeOoN-se.js";import{A as R}from"./admin-layout-CnvSajRV.js";import{D as h}from"./download-Cgzh-4uh.js";/* empty css            */import"./Combination-Dbugd-ik.js";import"./index-UgMxGKWo.js";import"./index-B2zMfxgR.js";import"./chevron-down-Er7kFRNC.js";import"./chevron-up-0kCwikx3.js";import"./app-sidebar-header-rASVoSnQ.js";import"./use-initials-BU6pEj1R.js";import"./app-logo-icon-BGK4uD7Q.js";import"./breadcrumb-CcI3hiRC.js";import"./separator-BoPlGso7.js";import"./package-C1XeRBSI.js";import"./pencil-4ow-Rv7N.js";const T=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Laporan",href:"/admin/reports"}];function X(){const[t,o]=n.useState({start_date:"",end_date:""}),[i,x]=n.useState("daily"),[c,p]=n.useState(!1),u=async()=>{if(!t.start_date||!t.end_date){alert("Pilih rentang tanggal terlebih dahulu");return}p(!0);try{const a=await fetch(`/admin/reports/sales?${new URLSearchParams({start_date:t.start_date,end_date:t.end_date,type:i,format:"pdf"})}`,{method:"GET",headers:{Accept:"application/pdf"}});if(!a.ok){const j=await a.json();throw new Error(j.message||"Failed to download report")}const r=await a.blob(),g=window.URL.createObjectURL(r),s=document.createElement("a");s.href=g,s.setAttribute("download",`sales-report-${t.start_date}-${t.end_date}.pdf`),document.body.appendChild(s),s.click(),s.remove()}catch(a){console.error("Error downloading report:",a),alert(a instanceof Error?a.message:"Gagal mengunduh laporan")}finally{p(!1)}};return e.jsxs(R,{breadcrumbs:T,children:[e.jsx(f,{title:"Laporan Penjualan"}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx("div",{className:"flex flex-col space-y-2 md:flex-row md:items-center md:justify-between md:space-y-0",children:e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Laporan Penjualan"})}),e.jsxs(_,{children:[e.jsxs(w,{children:[e.jsx(b,{children:"Unduh Laporan"}),e.jsx(v,{children:"Pilih rentang tanggal dan tipe laporan yang diinginkan"})]}),e.jsx(L,{children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"start_date",children:"Tanggal Mulai"}),e.jsx(m,{id:"start_date",type:"date",value:t.start_date,onChange:a=>o(r=>({...r,start_date:a.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"end_date",children:"Tanggal Akhir"}),e.jsx(m,{id:"end_date",type:"date",value:t.end_date,onChange:a=>o(r=>({...r,end_date:a.target.value}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"report_type",children:"Tipe Laporan"}),e.jsxs(C,{value:i,onValueChange:x,children:[e.jsx(N,{children:e.jsx(S,{placeholder:"Pilih tipe laporan"})}),e.jsxs(k,{children:[e.jsx(l,{value:"daily",children:"Harian"}),e.jsx(l,{value:"weekly",children:"Mingguan"}),e.jsx(l,{value:"monthly",children:"Bulanan"})]})]})]}),e.jsx(y,{onClick:u,disabled:c||!t.start_date||!t.end_date,className:"w-full md:w-auto",children:c?e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"mr-2 h-4 w-4 animate-spin"}),"Memproses..."]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),"Unduh Laporan"]})})]})})]})]})]})}export{X as default};
