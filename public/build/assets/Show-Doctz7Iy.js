import{r as g,j as e,L as W,S as E}from"./app-Q9dS00et.js";import{B as w}from"./badge-C-2mWNdi.js";import{c as U,B as P,I}from"./index-BQZf-uuE.js";import{C as f,a as j,b as N,c as b,e as V,d as q}from"./card-BENBHJW0.js";import{S as G,a as J,b as X,c as K,d as Q}from"./select-DhSCGI5R.js";import{T as ee,a as se,b as y,c as _,d as te,e as d,f as ae}from"./table-DB-GKNhD.js";import{T as ne}from"./textarea-Bj_ySKTN.js";import{A as re}from"./admin-layout-BNJm122k.js";import{A as ie}from"./arrow-left-TJOcjJTI.js";import{c as ce,t as M,m as R,a as z,f as le}from"./format-BlyJTOGp.js";import{C as de}from"./circle-x-Dr9CFrKM.js";import{C as me}from"./circle-check-big-CDPZ1i_d.js";import{T as ue}from"./truck-C6CuAMGQ.js";import{P as oe}from"./package-Dd6V2RS6.js";import{S as he}from"./use-initials-DGQhOcWX.js";/* empty css            */import"./Combination-DF2WeoPk.js";import"./index-BHcF79r8.js";import"./index-BHMeM5Ko.js";import"./chevron-down-CDkaf-1w.js";import"./chevron-up-Byt_vOr7.js";import"./app-sidebar-header-CBy8gzWG.js";import"./app-logo-icon-Dqw-noQ_.js";import"./breadcrumb-DHuIZVg7.js";import"./separator-Cr2X9xzZ.js";import"./pencil-DFKxRa2o.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],F=U("CircleCheck",xe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],ge=U("Receipt",pe);function fe(s,t){const a=()=>ce(t==null?void 0:t.in,NaN),i=ye(s);let l;if(i.date){const c=ke(i.date,2);l=_e(c.restDateString,c.year)}if(!l||isNaN(+l))return a();const o=+l;let m=0,u;if(i.time&&(m=De(i.time),isNaN(m)))return a();if(i.timezone){if(u=Ce(i.timezone),isNaN(u))return a()}else{const c=new Date(o+m),h=M(0,t==null?void 0:t.in);return h.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),h.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),h}return M(o+m+u,t==null?void 0:t.in)}const D={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},je=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Ne=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,be=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ye(s){const t={},a=s.split(D.dateTimeDelimiter);let r;if(a.length>2)return t;if(/:/.test(a[0])?r=a[0]:(t.date=a[0],r=a[1],D.timeZoneDelimiter.test(t.date)&&(t.date=s.split(D.timeZoneDelimiter)[0],r=s.substr(t.date.length,s.length))),r){const i=D.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function ke(s,t){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=s.match(a);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,l=r[2]?parseInt(r[2]):null;return{year:l===null?i:l*100,restDateString:s.slice((r[1]||r[2]).length)}}function _e(s,t){if(t===null)return new Date(NaN);const a=s.match(je);if(!a)return new Date(NaN);const r=!!a[4],i=k(a[1]),l=k(a[2])-1,o=k(a[3]),m=k(a[4]),u=k(a[5])-1;if(r)return Pe(t,m,u)?Te(t,m,u):new Date(NaN);{const c=new Date(0);return!ve(t,l,o)||!we(t,i)?new Date(NaN):(c.setUTCFullYear(t,l,Math.max(i,o)),c)}}function k(s){return s?parseInt(s):1}function De(s){const t=s.match(Ne);if(!t)return NaN;const a=T(t[1]),r=T(t[2]),i=T(t[3]);return Ie(a,r,i)?a*R+r*z+i*1e3:NaN}function T(s){return s&&parseFloat(s.replace(",","."))||0}function Ce(s){if(s==="Z")return 0;const t=s.match(be);if(!t)return 0;const a=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return Me(r,i)?a*(r*R+i*z):NaN}function Te(s,t,a){const r=new Date(0);r.setUTCFullYear(s,0,4);const i=r.getUTCDay()||7,l=(t-1)*7+a+1-i;return r.setUTCDate(r.getUTCDate()+l),r}const Se=[31,null,31,30,31,30,31,31,30,31,30,31];function H(s){return s%400===0||s%4===0&&s%100!==0}function ve(s,t,a){return t>=0&&t<=11&&a>=1&&a<=(Se[t]||(H(s)?29:28))}function we(s,t){return t>=1&&t<=(H(s)?366:365)}function Pe(s,t,a){return t>=1&&t<=53&&a>=0&&a<=6}function Ie(s,t,a){return s===24?t===0&&a===0:a>=0&&a<60&&t>=0&&t<60&&s>=0&&s<25}function Me(s,t){return t>=0&&t<=59}const Fe=[{title:"Dasbor",href:"/admin/dashboard"},{title:"Pesanan",href:"/admin/orders"},{title:"Detail Pesanan",href:"#"}];function is({order:s,timeline:t}){const[a,r]=g.useState(s.status),[i,l]=g.useState(s.tracking_number||""),[o,m]=g.useState(s.tracking_url||""),[u,c]=g.useState(s.admin_notes||""),[h,C]=g.useState(!1),x=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(n),S=n=>le(fe(n),"dd MMM yyyy, HH:mm"),L=n=>{switch(n){case"pending":return"default";case"processing":return"secondary";case"shipped":return"default";case"completed":return"default";case"cancelled":return"destructive";default:return"secondary"}},O=()=>{C(!0),E.post(`/admin/orders/${s.id}`,{_method:"PUT",status:a,tracking_number:i,tracking_url:o,notes:u},{onSuccess:()=>{C(!1)},onError:()=>{C(!1)}})},Y={ShoppingCart:e.jsx(he,{className:"h-6 w-6"}),Package:e.jsx(oe,{className:"h-6 w-6"}),Truck:e.jsx(ue,{className:"h-6 w-6"}),CheckCircle:e.jsx(me,{className:"h-6 w-6"}),XCircle:e.jsx(de,{className:"h-6 w-6"}),Receipt:e.jsx(ge,{className:"h-6 w-6"}),CircleCheck:e.jsx(F,{className:"h-6 w-6"})},$=n=>Y[n]||e.jsx(F,{className:"h-6 w-6"}),v=s.total_amount||s.total_price||0,B=v-(s.shipping_cost||0),p=n=>{switch(n){case"pending":return"Menunggu";case"processing":return"Diproses";case"shipped":return"Dikirim";case"completed":return"Selesai";case"cancelled":return"Dibatalkan";default:return n}},A=()=>["pending","processing","shipped","completed","cancelled"];return e.jsxs(re,{breadcrumbs:Fe,children:[e.jsx(W,{title:`Pesanan #${s.order_number||s.id}`}),e.jsxs("div",{className:"space-y-6 p-3 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-2 sm:flex-row sm:items-center sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P,{variant:"outline",size:"icon",asChild:!0,children:e.jsx("a",{href:"/admin/orders",children:e.jsx(ie,{className:"h-4 w-4"})})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Pesanan ",s.order_number||`#${s.id}`]}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Dibuat pada ",S(s.created_at)]})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-3 sm:mt-0",children:[e.jsx(w,{variant:L(s.status),children:p(s.status)}),e.jsxs(w,{variant:s.payment_status==="paid"?"default":"secondary",children:["Pembayaran: ",s.payment_status==="paid"?"Dibayar":s.payment_status==="pending"?"Menunggu":"Gagal"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[e.jsxs(f,{children:[e.jsx(j,{children:e.jsx(N,{children:"Detail Produk"})}),e.jsx(b,{children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(y,{children:[e.jsx(_,{children:"Produk"}),e.jsx(_,{className:"text-right",children:"Harga"}),e.jsx(_,{className:"text-center",children:"Jumlah"}),e.jsx(_,{className:"text-right",children:"Total"})]})}),e.jsx(te,{children:s.items.map(n=>e.jsxs(y,{children:[e.jsx(d,{children:n.product.name}),e.jsx(d,{className:"text-right",children:x(n.price)}),e.jsx(d,{className:"text-center",children:n.quantity}),e.jsx(d,{className:"text-right",children:x(n.price*n.quantity)})]},n.id))}),e.jsxs(ae,{children:[e.jsxs(y,{children:[e.jsx(d,{colSpan:3,children:"Subtotal"}),e.jsx(d,{className:"text-right",children:x(B)})]}),e.jsxs(y,{children:[e.jsx(d,{colSpan:3,children:"Biaya Pengiriman"}),e.jsx(d,{className:"text-right",children:x(s.shipping_cost)})]}),e.jsxs(y,{children:[e.jsx(d,{colSpan:3,className:"font-bold",children:"Total"}),e.jsx(d,{className:"text-right font-bold",children:x(v)})]})]})]})})]}),e.jsxs(f,{children:[e.jsx(j,{children:e.jsx(N,{children:"Informasi Pelanggan"})}),e.jsx(b,{children:e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-muted-foreground mb-2 text-sm font-medium",children:"Detail Pelanggan"}),e.jsx("p",{className:"font-medium",children:s.user?s.user.name:s.guest_name||"Tamu"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:s.user?s.user.email:s.guest_email})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-muted-foreground mb-2 text-sm font-medium",children:"Metode Pembayaran"}),e.jsx("p",{className:"font-medium",children:s.payment_method}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Status:"," ",s.payment_status==="paid"?"Dibayar":s.payment_status==="pending"?"Menunggu":"Gagal"]})]})]})})]}),e.jsxs(f,{children:[e.jsx(j,{children:e.jsx(N,{children:"Informasi Pengiriman"})}),e.jsx(b,{children:e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-muted-foreground mb-2 text-sm font-medium",children:"Alamat Pengiriman"}),s.shipping_address?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-medium",children:s.shipping_address.full_name}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:[s.shipping_address.address_line1,s.shipping_address.address_line2&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),s.shipping_address.address_line2]}),e.jsx("br",{}),s.shipping_address.city,", ",s.shipping_address.state," ",s.shipping_address.postal_code,e.jsx("br",{}),s.shipping_address.country,e.jsx("br",{}),"Telepon: ",s.shipping_address.phone]})]}):e.jsx("p",{className:"text-muted-foreground",children:"Tidak ada alamat pengiriman"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-muted-foreground mb-2 text-sm font-medium",children:"Status Pengiriman"}),e.jsx("p",{className:"font-medium",children:p(s.status)}),s.tracking_number&&e.jsxs("p",{className:"text-muted-foreground text-sm",children:["No. Resi: ",s.tracking_number,s.tracking_url&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("a",{href:s.tracking_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Lacak Pengiriman"})]})]})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(f,{children:[e.jsxs(j,{children:[e.jsx(N,{children:"Kelola Pesanan"}),e.jsx(V,{children:"Perbarui status dan informasi pengiriman"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"status",className:"text-sm font-medium",children:"Status Pesanan"}),e.jsxs(G,{value:a,onValueChange:n=>r(n),disabled:h,children:[e.jsx(J,{id:"status",children:e.jsx(X,{placeholder:"Pilih status",children:p(a)})}),e.jsx(K,{children:A().map(n=>e.jsx(Q,{value:n,children:p(n)},n))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"tracking_number",className:"text-sm font-medium",children:"Nomor Resi"}),e.jsx(I,{id:"tracking_number",value:i,onChange:n=>l(n.target.value),placeholder:"Masukkan nomor resi"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"tracking_url",className:"text-sm font-medium",children:"Link Pelacakan"}),e.jsx(I,{id:"tracking_url",value:o,onChange:n=>m(n.target.value),placeholder:"Masukkan link pelacakan"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"notes",className:"text-sm font-medium",children:"Catatan Admin"}),e.jsx(ne,{id:"notes",value:u,onChange:n=>c(n.target.value),placeholder:"Tambahkan catatan internal",rows:4})]})]}),e.jsx(q,{children:e.jsx(P,{onClick:O,disabled:h,className:"w-full",children:h?"Menyimpan...":"Simpan Perubahan"})})]}),e.jsxs(f,{children:[e.jsx(j,{children:e.jsx(N,{children:"Riwayat Pesanan"})}),e.jsx(b,{children:e.jsx("div",{className:"space-y-4",children:t.map((n,Z)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"text-muted-foreground flex h-6 w-6 items-center justify-center",children:$(n.icon)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:p(n.status)}),e.jsx("p",{className:"text-muted-foreground text-sm",children:n.description}),e.jsx("p",{className:"text-muted-foreground text-sm",children:S(n.date)})]})]},Z))})})]})]})]})]})]})}export{is as default};
