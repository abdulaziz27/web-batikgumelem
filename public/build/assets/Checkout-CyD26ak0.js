import{r as a,j as e,U,t as Pe,u as pn,b as fn,c as xn,S as hn,d as gn}from"./app-DwQvDy9w.js";import{L as Ee}from"./Layout-DNaIcxlq.js";import{a as Ae,B as _,I as G}from"./index-CV-sgNoT.js";import{C as J,a as X,b as Z,e as re,c as Q}from"./card-gbdsC5LB.js";import{u as Ce,s as we,F as Se,a as $,b as P,c as T,d as E,e as K,z as w}from"./index-KCgYKOrM.js";import{L as W}from"./label-CpuOSbvT.js";import{a as jn}from"./use-initials-BVq1QrGF.js";import{S as me}from"./separator-CEurBC4g.js";import{f as B}from"./formatters-BdPsR_AQ.js";import{P as Re}from"./package-yXkfXm0u.js";import{C as Ie}from"./Combination-CG4Lygjr.js";import{T as bn}from"./truck-Bqa310CZ.js";import{L as pe}from"./loader-circle-Bw9WSvh5.js";import{C as vn}from"./credit-card-B83aubfj.js";/* empty css            */import"./map-pin-ZN5p3NTp.js";import"./badge-bvxh4pRl.js";function O(n,t,{checkForDefaultPrevented:s=!0}={}){return function(o){if(n==null||n(o),s===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function _e(n,t){if(typeof n=="function")return n(t);n!=null&&(n.current=t)}function Me(...n){return t=>{let s=!1;const r=n.map(o=>{const c=_e(o,t);return!s&&typeof c=="function"&&(s=!0),c});if(s)return()=>{for(let o=0;o<r.length;o++){const c=r[o];typeof c=="function"?c():_e(n[o],null)}}}}function z(...n){return a.useCallback(Me(...n),n)}function ae(n,t=[]){let s=[];function r(c,d){const l=a.createContext(d),p=s.length;s=[...s,d];const m=x=>{var N;const{scope:b,children:g,...v}=x,f=((N=b==null?void 0:b[n])==null?void 0:N[p])||l,h=a.useMemo(()=>v,Object.values(v));return e.jsx(f.Provider,{value:h,children:g})};m.displayName=c+"Provider";function u(x,b){var f;const g=((f=b==null?void 0:b[n])==null?void 0:f[p])||l,v=a.useContext(g);if(v)return v;if(d!==void 0)return d;throw new Error(`\`${x}\` must be used within \`${c}\``)}return[m,u]}const o=()=>{const c=s.map(d=>a.createContext(d));return function(l){const p=(l==null?void 0:l[n])||c;return a.useMemo(()=>({[`__scope${n}`]:{...l,[n]:p}}),[l,p])}};return o.scopeName=n,[r,yn(o,...t)]}function yn(...n){const t=n[0];if(n.length===1)return t;const s=()=>{const r=n.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(c){const d=r.reduce((l,{useScope:p,scopeName:m})=>{const x=p(c)[`__scope${m}`];return{...l,...x}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return s.scopeName=t.scopeName,s}function xe(n){const t=Nn(n),s=a.forwardRef((r,o)=>{const{children:c,...d}=r,l=a.Children.toArray(c),p=l.find(Cn);if(p){const m=p.props.children,u=l.map(x=>x===p?a.Children.count(m)>1?a.Children.only(null):a.isValidElement(m)?m.props.children:null:x);return e.jsx(t,{...d,ref:o,children:a.isValidElement(m)?a.cloneElement(m,void 0,u):null})}return e.jsx(t,{...d,ref:o,children:c})});return s.displayName=`${n}.Slot`,s}function Nn(n){const t=a.forwardRef((s,r)=>{const{children:o,...c}=s;if(a.isValidElement(o)){const d=Sn(o),l=wn(c,o.props);return o.type!==a.Fragment&&(l.ref=r?Me(r,d):d),a.cloneElement(o,l)}return a.Children.count(o)>1?a.Children.only(null):null});return t.displayName=`${n}.SlotClone`,t}var kn=Symbol("radix.slottable");function Cn(n){return a.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===kn}function wn(n,t){const s={...t};for(const r in t){const o=n[r],c=t[r];/^on[A-Z]/.test(r)?o&&c?s[r]=(...l)=>{c(...l),o(...l)}:o&&(s[r]=o):r==="style"?s[r]={...o,...c}:r==="className"&&(s[r]=[o,c].filter(Boolean).join(" "))}return{...n,...s}}function Sn(n){var r,o;let t=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?n.ref:(t=(o=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:o.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?n.props.ref:n.props.ref||n.ref)}var Rn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],q=Rn.reduce((n,t)=>{const s=xe(`Primitive.${t}`),r=a.forwardRef((o,c)=>{const{asChild:d,...l}=o,p=d?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(p,{...l,ref:c})});return r.displayName=`Primitive.${t}`,{...n,[t]:r}},{});function In(n){const t=n+"CollectionProvider",[s,r]=ae(t),[o,c]=s(t,{collectionRef:{current:null},itemMap:new Map}),d=f=>{const{scope:h,children:N}=f,S=U.useRef(null),j=U.useRef(new Map).current;return e.jsx(o,{scope:h,itemMap:j,collectionRef:S,children:N})};d.displayName=t;const l=n+"CollectionSlot",p=xe(l),m=U.forwardRef((f,h)=>{const{scope:N,children:S}=f,j=c(l,N),k=z(h,j.collectionRef);return e.jsx(p,{ref:k,children:S})});m.displayName=l;const u=n+"CollectionItemSlot",x="data-radix-collection-item",b=xe(u),g=U.forwardRef((f,h)=>{const{scope:N,children:S,...j}=f,k=U.useRef(null),y=z(h,k),R=c(u,N);return U.useEffect(()=>(R.itemMap.set(k,{ref:k,...j}),()=>void R.itemMap.delete(k))),e.jsx(b,{[x]:"",ref:y,children:S})});g.displayName=u;function v(f){const h=c(n+"CollectionConsumer",f);return U.useCallback(()=>{const S=h.collectionRef.current;if(!S)return[];const j=Array.from(S.querySelectorAll(`[${x}]`));return Array.from(h.itemMap.values()).sort((R,D)=>j.indexOf(R.ref.current)-j.indexOf(D.ref.current))},[h.collectionRef,h.itemMap])}return[{Provider:d,Slot:m,ItemSlot:g},v,r]}var ne=globalThis!=null&&globalThis.document?a.useLayoutEffect:()=>{},_n=Pe[" useId ".trim().toString()]||(()=>{}),Pn=0;function En(n){const[t,s]=a.useState(_n());return ne(()=>{s(r=>r??String(Pn++))},[n]),t?`radix-${t}`:""}function An(n){const t=a.useRef(n);return a.useEffect(()=>{t.current=n}),a.useMemo(()=>(...s)=>{var r;return(r=t.current)==null?void 0:r.call(t,...s)},[])}var Mn=Pe[" useInsertionEffect ".trim().toString()]||ne;function Fe({prop:n,defaultProp:t,onChange:s=()=>{},caller:r}){const[o,c,d]=Fn({defaultProp:t,onChange:s}),l=n!==void 0,p=l?n:o;{const u=a.useRef(n!==void 0);a.useEffect(()=>{const x=u.current;x!==l&&console.warn(`${r} is changing from ${x?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,r])}const m=a.useCallback(u=>{var x;if(l){const b=Tn(u)?u(n):u;b!==n&&((x=d.current)==null||x.call(d,b))}else c(u)},[l,n,c,d]);return[p,m]}function Fn({defaultProp:n,onChange:t}){const[s,r]=a.useState(n),o=a.useRef(s),c=a.useRef(t);return Mn(()=>{c.current=t},[t]),a.useEffect(()=>{var d;o.current!==s&&((d=c.current)==null||d.call(c,s),o.current=s)},[s,o]),[s,r,c]}function Tn(n){return typeof n=="function"}var On=a.createContext(void 0);function Te(n){const t=a.useContext(On);return n||t||"ltr"}var fe="rovingFocusGroup.onEntryFocus",Dn={bubbles:!1,cancelable:!0},te="RovingFocusGroup",[he,Oe,Ln]=In(te),[Gn,De]=ae(te,[Ln]),[$n,Kn]=Gn(te),Le=a.forwardRef((n,t)=>e.jsx(he.Provider,{scope:n.__scopeRovingFocusGroup,children:e.jsx(he.Slot,{scope:n.__scopeRovingFocusGroup,children:e.jsx(Bn,{...n,ref:t})})}));Le.displayName=te;var Bn=a.forwardRef((n,t)=>{const{__scopeRovingFocusGroup:s,orientation:r,loop:o=!1,dir:c,currentTabStopId:d,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:p,onEntryFocus:m,preventScrollOnEntryFocus:u=!1,...x}=n,b=a.useRef(null),g=z(t,b),v=Te(c),[f,h]=Fe({prop:d,defaultProp:l??null,onChange:p,caller:te}),[N,S]=a.useState(!1),j=An(m),k=Oe(s),y=a.useRef(!1),[R,D]=a.useState(0);return a.useEffect(()=>{const C=b.current;if(C)return C.addEventListener(fe,j),()=>C.removeEventListener(fe,j)},[j]),e.jsx($n,{scope:s,orientation:r,dir:v,loop:o,currentTabStopId:f,onItemFocus:a.useCallback(C=>h(C),[h]),onItemShiftTab:a.useCallback(()=>S(!0),[]),onFocusableItemAdd:a.useCallback(()=>D(C=>C+1),[]),onFocusableItemRemove:a.useCallback(()=>D(C=>C-1),[]),children:e.jsx(q.div,{tabIndex:N||R===0?-1:0,"data-orientation":r,...x,ref:g,style:{outline:"none",...n.style},onMouseDown:O(n.onMouseDown,()=>{y.current=!0}),onFocus:O(n.onFocus,C=>{const se=!y.current;if(C.target===C.currentTarget&&se&&!N){const Y=new CustomEvent(fe,Dn);if(C.currentTarget.dispatchEvent(Y),!Y.defaultPrevented){const A=k().filter(M=>M.focusable),ce=A.find(M=>M.active),V=A.find(M=>M.id===f),H=[ce,V,...A].filter(Boolean).map(M=>M.ref.current);Ke(H,u)}}y.current=!1}),onBlur:O(n.onBlur,()=>S(!1))})})}),Ge="RovingFocusGroupItem",$e=a.forwardRef((n,t)=>{const{__scopeRovingFocusGroup:s,focusable:r=!0,active:o=!1,tabStopId:c,children:d,...l}=n,p=En(),m=c||p,u=Kn(Ge,s),x=u.currentTabStopId===m,b=Oe(s),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:f}=u;return a.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),e.jsx(he.ItemSlot,{scope:s,id:m,focusable:r,active:o,children:e.jsx(q.span,{tabIndex:x?0:-1,"data-orientation":u.orientation,...l,ref:t,onMouseDown:O(n.onMouseDown,h=>{r?u.onItemFocus(m):h.preventDefault()}),onFocus:O(n.onFocus,()=>u.onItemFocus(m)),onKeyDown:O(n.onKeyDown,h=>{if(h.key==="Tab"&&h.shiftKey){u.onItemShiftTab();return}if(h.target!==h.currentTarget)return;const N=Wn(h,u.orientation,u.dir);if(N!==void 0){if(h.metaKey||h.ctrlKey||h.altKey||h.shiftKey)return;h.preventDefault();let j=b().filter(k=>k.focusable).map(k=>k.ref.current);if(N==="last")j.reverse();else if(N==="prev"||N==="next"){N==="prev"&&j.reverse();const k=j.indexOf(h.currentTarget);j=u.loop?zn(j,k+1):j.slice(k+1)}setTimeout(()=>Ke(j))}}),children:typeof d=="function"?d({isCurrentTabStop:x,hasTabStop:f!=null}):d})})});$e.displayName=Ge;var Un={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Vn(n,t){return t!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function Wn(n,t,s){const r=Vn(n.key,s);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Un[r]}function Ke(n,t=!1){const s=document.activeElement;for(const r of n)if(r===s||(r.focus({preventScroll:t}),document.activeElement!==s))return}function zn(n,t){return n.map((s,r)=>n[(t+r)%n.length])}var qn=Le,Yn=$e;function Hn(n){const[t,s]=a.useState(void 0);return ne(()=>{if(n){s({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const c=o[0];let d,l;if("borderBoxSize"in c){const p=c.borderBoxSize,m=Array.isArray(p)?p[0]:p;d=m.inlineSize,l=m.blockSize}else d=n.offsetWidth,l=n.offsetHeight;s({width:d,height:l})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else s(void 0)},[n]),t}function Jn(n){const t=a.useRef({value:n,previous:n});return a.useMemo(()=>(t.current.value!==n&&(t.current.previous=t.current.value,t.current.value=n),t.current.previous),[n])}function Xn(n,t){return a.useReducer((s,r)=>t[s][r]??s,n)}var Be=n=>{const{present:t,children:s}=n,r=Zn(t),o=typeof s=="function"?s({present:r.isPresent}):a.Children.only(s),c=z(r.ref,Qn(o));return typeof s=="function"||r.isPresent?a.cloneElement(o,{ref:c}):null};Be.displayName="Presence";function Zn(n){const[t,s]=a.useState(),r=a.useRef(null),o=a.useRef(n),c=a.useRef("none"),d=n?"mounted":"unmounted",[l,p]=Xn(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return a.useEffect(()=>{const m=oe(r.current);c.current=l==="mounted"?m:"none"},[l]),ne(()=>{const m=r.current,u=o.current;if(u!==n){const b=c.current,g=oe(m);n?p("MOUNT"):g==="none"||(m==null?void 0:m.display)==="none"?p("UNMOUNT"):p(u&&b!==g?"ANIMATION_OUT":"UNMOUNT"),o.current=n}},[n,p]),ne(()=>{if(t){let m;const u=t.ownerDocument.defaultView??window,x=g=>{const f=oe(r.current).includes(g.animationName);if(g.target===t&&f&&(p("ANIMATION_END"),!o.current)){const h=t.style.animationFillMode;t.style.animationFillMode="forwards",m=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=h)})}},b=g=>{g.target===t&&(c.current=oe(r.current))};return t.addEventListener("animationstart",b),t.addEventListener("animationcancel",x),t.addEventListener("animationend",x),()=>{u.clearTimeout(m),t.removeEventListener("animationstart",b),t.removeEventListener("animationcancel",x),t.removeEventListener("animationend",x)}}else p("ANIMATION_END")},[t,p]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:a.useCallback(m=>{r.current=m?getComputedStyle(m):null,s(m)},[])}}function oe(n){return(n==null?void 0:n.animationName)||"none"}function Qn(n){var r,o;let t=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?n.ref:(t=(o=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:o.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?n.props.ref:n.props.ref||n.ref)}var je="Radio",[et,Ue]=ae(je),[nt,tt]=et(je),Ve=a.forwardRef((n,t)=>{const{__scopeRadio:s,name:r,checked:o=!1,required:c,disabled:d,value:l="on",onCheck:p,form:m,...u}=n,[x,b]=a.useState(null),g=z(t,h=>b(h)),v=a.useRef(!1),f=x?m||!!x.closest("form"):!0;return e.jsxs(nt,{scope:s,checked:o,disabled:d,children:[e.jsx(q.button,{type:"button",role:"radio","aria-checked":o,"data-state":Ye(o),"data-disabled":d?"":void 0,disabled:d,value:l,...u,ref:g,onClick:O(n.onClick,h=>{o||p==null||p(),f&&(v.current=h.isPropagationStopped(),v.current||h.stopPropagation())})}),f&&e.jsx(qe,{control:x,bubbles:!v.current,name:r,value:l,checked:o,required:c,disabled:d,form:m,style:{transform:"translateX(-100%)"}})]})});Ve.displayName=je;var We="RadioIndicator",ze=a.forwardRef((n,t)=>{const{__scopeRadio:s,forceMount:r,...o}=n,c=tt(We,s);return e.jsx(Be,{present:r||c.checked,children:e.jsx(q.span,{"data-state":Ye(c.checked),"data-disabled":c.disabled?"":void 0,...o,ref:t})})});ze.displayName=We;var st="RadioBubbleInput",qe=a.forwardRef(({__scopeRadio:n,control:t,checked:s,bubbles:r=!0,...o},c)=>{const d=a.useRef(null),l=z(d,c),p=Jn(s),m=Hn(t);return a.useEffect(()=>{const u=d.current;if(!u)return;const x=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(x,"checked").set;if(p!==s&&g){const v=new Event("click",{bubbles:r});g.call(u,s),u.dispatchEvent(v)}},[p,s,r]),e.jsx(q.input,{type:"radio","aria-hidden":!0,defaultChecked:s,...o,tabIndex:-1,ref:l,style:{...o.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});qe.displayName=st;function Ye(n){return n?"checked":"unchecked"}var rt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ie="RadioGroup",[ot,At]=ae(ie,[De,Ue]),He=De(),Je=Ue(),[at,it]=ot(ie),Xe=a.forwardRef((n,t)=>{const{__scopeRadioGroup:s,name:r,defaultValue:o,value:c,required:d=!1,disabled:l=!1,orientation:p,dir:m,loop:u=!0,onValueChange:x,...b}=n,g=He(s),v=Te(m),[f,h]=Fe({prop:c,defaultProp:o??"",onChange:x,caller:ie});return e.jsx(at,{scope:s,name:r,required:d,disabled:l,value:f,onValueChange:h,children:e.jsx(qn,{asChild:!0,...g,orientation:p,dir:v,loop:u,children:e.jsx(q.div,{role:"radiogroup","aria-required":d,"aria-orientation":p,"data-disabled":l?"":void 0,dir:v,...b,ref:t})})})});Xe.displayName=ie;var Ze="RadioGroupItem",Qe=a.forwardRef((n,t)=>{const{__scopeRadioGroup:s,disabled:r,...o}=n,c=it(Ze,s),d=c.disabled||r,l=He(s),p=Je(s),m=a.useRef(null),u=z(t,m),x=c.value===o.value,b=a.useRef(!1);return a.useEffect(()=>{const g=f=>{rt.includes(f.key)&&(b.current=!0)},v=()=>b.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",v)}},[]),e.jsx(Yn,{asChild:!0,...l,focusable:!d,active:x,children:e.jsx(Ve,{disabled:d,required:c.required,checked:x,...p,...o,name:c.name,ref:u,onCheck:()=>c.onValueChange(o.value),onKeyDown:O(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:O(o.onFocus,()=>{var g;b.current&&((g=m.current)==null||g.click())})})})});Qe.displayName=Ze;var ct="RadioGroupIndicator",en=a.forwardRef((n,t)=>{const{__scopeRadioGroup:s,...r}=n,o=Je(s);return e.jsx(ze,{...o,...r,ref:t})});en.displayName=ct;var nn=Xe,tn=Qe,lt=en;const ge=a.forwardRef(({className:n,...t},s)=>e.jsx(nn,{className:Ae("grid gap-2",n),...t,ref:s}));ge.displayName=nn.displayName;const ee=a.forwardRef(({className:n,...t},s)=>e.jsx(tn,{ref:s,className:Ae("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),...t,children:e.jsx(lt,{className:"flex items-center justify-center",children:e.jsx(jn,{className:"h-2.5 w-2.5 fill-current text-current"})})}));ee.displayName=tn.displayName;const dt=w.object({fullName:w.string().min(3,{message:"Nama lengkap harus diisi"}),address:w.string().min(5,{message:"Alamat harus diisi"}),city:w.string().min(3,{message:"Kota harus diisi"}),postalCode:w.string().min(5,{message:"Kode pos harus diisi"}),province:w.string().min(3,{message:"Provinsi harus diisi"}),phone:w.string().min(10,{message:"Nomor telepon harus diisi dengan benar"}),email:w.string().email({message:"Format email tidak valid"}).optional()});w.object({addressType:w.enum(["new","saved"]),savedAddressId:w.number().optional(),saveAddress:w.boolean().optional(),setAsDefault:w.boolean().optional()});const ut=w.object({paymentMethod:w.enum(["bank_transfer","e_wallet"],{required_error:"Pilih metode pembayaran"})});class mt extends U.Component{constructor(t){super(t),this.state={error:null,errorInfo:null}}static getDerivedStateFromError(t){return{error:t,errorInfo:null}}componentDidCatch(t,s){this.setState({error:t,errorInfo:s})}render(){var t,s,r;return this.state.error?e.jsx(Ee,{children:e.jsxs("div",{style:{color:"red",padding:24},children:[e.jsx("h2",{children:"Terjadi error di Checkout:"}),e.jsx("pre",{children:(t=this.state.error)==null?void 0:t.toString()}),e.jsx("pre",{children:(s=this.state.errorInfo)==null?void 0:s.componentStack}),e.jsx("pre",{children:(r=this.state.error)==null?void 0:r.stack})]})}):this.props.children}}const pt=({cart:n,coupon:t,shippingOptions:s,savedAddresses:r,auth:o})=>{var Ne,ke;const[c,d]=a.useState(null),{cartItems:l,totalPrice:p,clearCart:m}=pn(),{activeCoupon:u,applyCoupon:x,removeCoupon:b,discountAmount:g,isLoading:v}=fn(),{shippingAddress:f,setShippingAddress:h,calculateShipping:N,selectShipping:S,selectedShipping:j,isCalculatingShipping:k}=xn(),[y,R]=a.useState("shipping"),[D,C]=a.useState(""),[se,Y]=a.useState(!1),[A,ce]=a.useState(r!=null&&r.length?"saved":"new"),[V,be]=a.useState(((Ne=r==null?void 0:r.find(i=>i.is_default))==null?void 0:Ne.id)||((ke=r==null?void 0:r[0])==null?void 0:ke.id)||null),[H,M]=a.useState(!1),[ve,sn]=a.useState(!1),[ye,rn]=a.useState(s||[]),F=Ce({resolver:we(dt),defaultValues:f||{fullName:"",address:"",city:"",postalCode:"",province:"",phone:""}}),L=Ce({resolver:we(ut),defaultValues:{paymentMethod:"bank_transfer"}});if(a.useEffect(()=>{s&&(console.log("Updating local shipping options:",s),rn(s))},[s]),a.useEffect(()=>{C(u?u.code:"")},[u]),l.length===0)return e.jsx("div",{className:"container mx-auto px-4 py-16 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Re,{className:"mx-auto h-16 w-16 text-gray-400"}),e.jsx("h2",{className:"mt-2 text-2xl font-bold tracking-tight text-gray-900 sm:text-3xl",children:"Keranjang Belanja Kosong"}),e.jsx("p",{className:"mt-4 text-gray-500",children:"Anda belum menambahkan produk apapun ke keranjang belanja."}),e.jsx("div",{className:"mt-6",children:e.jsx(_,{asChild:!0,className:"bg-batik-indigo hover:bg-batik-indigo/90",children:e.jsx("a",{href:"/products",children:"Lihat Produk"})})})]})});const le=p,de=g(le),ue=j?j.price:0,on=le-de+ue,an=()=>{if(!D){gn("Kode kupon tidak boleh kosong",{description:"Silakan masukkan kode kupon"});return}x(D)},cn=i=>{const I={fullName:i.fullName,address:i.address,city:i.city,postalCode:i.postalCode,province:i.province,phone:i.phone};h(I),R("delivery")},ln=()=>{f&&N(f.city,f.postalCode)},dn=i=>{S(i),R("payment")},un=i=>{console.log("Payment method selected:",i.paymentMethod),R("review")},mn=()=>{if(!j||!f)return;Y(!0);const i={shipping_address:{full_name:f.fullName,address:f.address,city:f.city,province:f.province,postal_code:f.postalCode,phone:f.phone},shipping_method:{id:j.type,company:j.courier_name,name:j.courier_service_name,price:j.price},payment_method:L.getValues("paymentMethod"),...u!=null&&u.id?{coupon_id:u.id}:{},...f.email?{email:f.email}:{},notes:"",...A==="saved"&&V?{saved_address_id:V}:{},...A==="new"&&!(o!=null&&o.check)?{save_address:H,set_as_default:ve}:{}};hn.post("/checkout",i,{onSuccess:()=>{},onError:I=>{},onFinish:()=>{Y(!1)}})};return e.jsx("div",{className:"container mx-auto px-4 py-12 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-8 gap-y-10 lg:grid-cols-12",children:[e.jsxs("div",{className:"lg:col-span-8",children:[e.jsxs("div",{className:"mb-10",children:[e.jsx("h1",{className:"text-batik-brown text-2xl font-bold tracking-tight",children:"Checkout"}),e.jsx("div",{className:"mt-4",children:e.jsx("nav",{className:"flex items-center justify-between",children:e.jsxs("ol",{className:"flex w-full items-center justify-between",children:[e.jsxs("li",{className:`flex items-center ${y==="shipping"?"text-batik-indigo font-medium":"text-gray-500"}`,children:[e.jsx("span",{className:`flex h-8 w-8 items-center justify-center rounded-full ${y==="shipping"?"bg-batik-indigo text-white":"bg-gray-100"}`,children:"1"}),e.jsx("span",{className:"ml-2 hidden sm:inline",children:"Pengiriman"})]}),e.jsx("div",{className:"mx-2 h-0.5 w-full flex-1 bg-gray-200"}),e.jsxs("li",{className:`flex items-center ${y==="delivery"?"text-batik-indigo font-medium":"text-gray-500"}`,children:[e.jsx("span",{className:`flex h-8 w-8 items-center justify-center rounded-full ${y==="delivery"?"bg-batik-indigo text-white":y==="payment"||y==="review"?"bg-green-500 text-white":"bg-gray-100"}`,children:y==="payment"||y==="review"?e.jsx(Ie,{className:"h-4 w-4"}):"2"}),e.jsx("span",{className:"ml-2 hidden sm:inline",children:"Pengiriman"})]}),e.jsx("div",{className:"mx-2 h-0.5 w-full flex-1 bg-gray-200"}),e.jsxs("li",{className:`flex items-center ${y==="payment"?"text-batik-indigo font-medium":"text-gray-500"}`,children:[e.jsx("span",{className:`flex h-8 w-8 items-center justify-center rounded-full ${y==="payment"?"bg-batik-indigo text-white":y==="review"?"bg-green-500 text-white":"bg-gray-100"}`,children:y==="review"?e.jsx(Ie,{className:"h-4 w-4"}):"3"}),e.jsx("span",{className:"ml-2 hidden sm:inline",children:"Pembayaran"})]}),e.jsx("div",{className:"mx-2 h-0.5 w-full flex-1 bg-gray-200"}),e.jsxs("li",{className:`flex items-center ${y==="review"?"text-batik-indigo font-medium":"text-gray-500"}`,children:[e.jsx("span",{className:`flex h-8 w-8 items-center justify-center rounded-full ${y==="review"?"bg-batik-indigo text-white":"bg-gray-100"}`,children:"4"}),e.jsx("span",{className:"ml-2 hidden sm:inline",children:"Konfirmasi"})]})]})})})]}),y==="shipping"&&e.jsxs(J,{children:[e.jsxs(X,{children:[e.jsxs(Z,{className:"flex items-center",children:[e.jsx(Re,{className:"mr-2 h-5 w-5"}),"Informasi Pengiriman"]}),e.jsx(re,{children:"Masukkan alamat pengiriman untuk pesanan Anda"})]}),e.jsxs(Q,{children:[r&&r.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(W,{className:"text-base font-semibold",children:"Pilih Alamat"}),e.jsxs(ge,{value:A,onValueChange:i=>ce(i),className:"mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{value:"saved",id:"saved-address"}),e.jsx(W,{htmlFor:"saved-address",className:"font-normal",children:"Gunakan alamat tersimpan"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{value:"new",id:"new-address"}),e.jsx(W,{htmlFor:"new-address",className:"font-normal",children:"Gunakan alamat baru"})]})]})]}),A==="saved"&&e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsx(W,{className:"block text-sm font-medium",children:"Pilih alamat pengiriman"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:r.map(i=>e.jsxs("div",{className:`cursor-pointer rounded-lg border p-4 transition-colors ${V===i.id?"border-batik-indigo bg-batik-indigo/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>be(i.id),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:i.full_name}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:i.phone})]}),i.is_default&&e.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700",children:"Default"})]}),e.jsxs("p",{className:"mt-2 text-sm text-gray-700",children:[i.address,", ",i.city,", ",i.province,", ",i.postal_code]})]},i.id))}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(_,{type:"button",disabled:!V,onClick:()=>{const i=r.find(I=>I.id===V);if(i){const I={fullName:i.full_name,address:i.address,city:i.city,province:i.province,postalCode:i.postal_code,phone:i.phone};h(I),R("delivery")}},className:"bg-batik-indigo hover:bg-batik-indigo/90",children:"Lanjutkan"})})]})]}),(A==="new"||!r||r.length===0)&&e.jsx(Se,{...F,children:e.jsxs("form",{onSubmit:F.handleSubmit(cn),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsx($,{control:F.control,name:"fullName",render:({field:i})=>e.jsxs(P,{children:[e.jsx(T,{children:"Nama Lengkap"}),e.jsx(E,{children:e.jsx(G,{placeholder:"Masukkan nama lengkap",...i})}),e.jsx(K,{})]})}),e.jsx($,{control:F.control,name:"phone",render:({field:i})=>e.jsxs(P,{children:[e.jsx(T,{children:"Nomor Telepon"}),e.jsx(E,{children:e.jsx(G,{placeholder:"contoh: 081234567890",...i})}),e.jsx(K,{})]})}),!(o!=null&&o.check)&&e.jsx($,{control:F.control,name:"email",render:({field:i})=>e.jsxs(P,{children:[e.jsx(T,{children:"Email"}),e.jsx(E,{children:e.jsx(G,{type:"email",placeholder:"Masukkan alamat email",...i})}),e.jsx(K,{})]})}),e.jsx("div",{className:`${o!=null&&o.check?"sm:col-span-2":""}`,children:e.jsx($,{control:F.control,name:"address",render:({field:i})=>e.jsxs(P,{children:[e.jsx(T,{children:"Alamat"}),e.jsx(E,{children:e.jsx(G,{placeholder:"Masukkan alamat lengkap",...i})}),e.jsx(K,{})]})})}),e.jsx($,{control:F.control,name:"city",render:({field:i})=>e.jsxs(P,{children:[e.jsx(T,{children:"Kota"}),e.jsx(E,{children:e.jsx(G,{placeholder:"Masukkan nama kota",...i})}),e.jsx(K,{})]})}),e.jsx($,{control:F.control,name:"province",render:({field:i})=>e.jsxs(P,{children:[e.jsx(T,{children:"Provinsi"}),e.jsx(E,{children:e.jsx(G,{placeholder:"Masukkan nama provinsi",...i})}),e.jsx(K,{})]})}),e.jsx($,{control:F.control,name:"postalCode",render:({field:i})=>e.jsxs(P,{children:[e.jsx(T,{children:"Kode Pos"}),e.jsx(E,{children:e.jsx(G,{placeholder:"contoh: 12345",...i})}),e.jsx(K,{})]})})]}),r&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"save-address",checked:H,onChange:i=>M(i.target.checked),className:"text-batik-indigo focus:ring-batik-indigo h-4 w-4 rounded border-gray-300"}),e.jsx(W,{htmlFor:"save-address",className:"text-sm leading-none font-medium",children:"Simpan alamat ini untuk pembelian selanjutnya"})]}),H&&e.jsxs("div",{className:"ml-6 flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"set-default",checked:ve,onChange:i=>sn(i.target.checked),className:"text-batik-indigo focus:ring-batik-indigo h-4 w-4 rounded border-gray-300"}),e.jsx(W,{htmlFor:"set-default",className:"text-sm leading-none font-medium",children:"Jadikan sebagai alamat utama"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(_,{type:"submit",className:"bg-batik-indigo hover:bg-batik-indigo/90",children:"Lanjutkan"})})]})})]})]}),y==="delivery"&&e.jsxs(J,{children:[e.jsxs(X,{children:[e.jsxs(Z,{className:"flex items-center",children:[e.jsx(bn,{className:"mr-2 h-5 w-5"}),"Opsi Pengiriman"]}),e.jsx(re,{children:"Pilih metode pengiriman yang Anda inginkan"})]}),e.jsx(Q,{children:ye.length===0?e.jsxs("div",{className:"py-6 text-center",children:[e.jsx(_,{onClick:ln,disabled:k,className:"bg-batik-indigo hover:bg-batik-indigo/90",children:k?e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"mr-2 h-4 w-4 animate-spin"}),"Menghitung..."]}):"Hitung Ongkos Kirim"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Klik tombol di atas untuk menghitung ongkos kirim ke alamat Anda"})]}):e.jsx("div",{className:"space-y-4",children:ye.map(i=>{const I=j&&j.courier_code===i.courier_code&&j.courier_service_code===i.courier_service_code;return e.jsxs("div",{className:`hover:border-batik-indigo/50 flex cursor-pointer items-center justify-between rounded-lg border p-4 transition-colors ${I?"border-batik-indigo bg-batik-indigo/5":"border-gray-200"}`,onClick:()=>dn(i),children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`flex h-6 w-6 items-center justify-center rounded-full border-2 ${I?"border-batik-indigo":"border-gray-300"}`,children:I&&e.jsx("div",{className:"bg-batik-indigo h-3 w-3 rounded-full"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"font-medium",children:[i.courier_name," - ",i.courier_service_name]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("p",{children:i.description}),e.jsxs("p",{children:["Estimasi: ",i.duration]})]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-batik-indigo font-medium",children:B(i.price)})})]},`${i.courier_code}-${i.courier_service_code}`)})})})]}),y==="payment"&&e.jsxs(J,{children:[e.jsxs(X,{children:[e.jsxs(Z,{className:"flex items-center",children:[e.jsx(vn,{className:"mr-2 h-5 w-5"}),"Metode Pembayaran"]}),e.jsx(re,{children:"Pilih metode pembayaran yang Anda inginkan"})]}),e.jsx(Q,{children:e.jsx(Se,{...L,children:e.jsxs("form",{onSubmit:L.handleSubmit(un),className:"space-y-6",children:[e.jsx($,{control:L.control,name:"paymentMethod",render:({field:i})=>e.jsxs(P,{className:"space-y-3",children:[e.jsx(E,{children:e.jsxs(ge,{onValueChange:i.onChange,defaultValue:i.value,className:"space-y-3",children:[e.jsxs(P,{className:"flex items-center space-y-0 space-x-3 rounded-lg border p-4",children:[e.jsx(E,{children:e.jsx(ee,{value:"bank_transfer"})}),e.jsx(T,{className:"flex-1 cursor-pointer font-normal",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Transfer Bank"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Bayar melalui transfer bank (BCA, Mandiri, BNI, BRI)"})]})})]}),e.jsxs(P,{className:"flex items-center space-y-0 space-x-3 rounded-lg border p-4",children:[e.jsx(E,{children:e.jsx(ee,{value:"e_wallet"})}),e.jsx(T,{className:"flex-1 cursor-pointer font-normal",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"E-Wallet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Bayar menggunakan e-wallet (OVO, GoPay, DANA, LinkAja)"})]})})]})]})}),e.jsx(K,{})]})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(_,{variant:"outline",onClick:()=>R("delivery"),children:"Kembali"}),e.jsx(_,{type:"submit",className:"bg-batik-indigo hover:bg-batik-indigo/90",children:"Lanjutkan"})]})]})})})]}),y==="review"&&e.jsxs(J,{children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Konfirmasi Pesanan"}),e.jsx(re,{children:"Tinjau pesanan Anda sebelum melakukan pembayaran"})]}),e.jsxs(Q,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-batik-brown mb-2 font-semibold",children:"Alamat Pengiriman"}),e.jsx("div",{className:"rounded-lg border p-4",children:f&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-medium",children:f.fullName}),e.jsx("p",{className:"text-sm text-gray-600",children:f.phone}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:[f.address,", ",f.city,", ",f.province," ",f.postalCode]})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-batik-brown mb-2 font-semibold",children:"Metode Pengiriman"}),e.jsx("div",{className:"rounded-lg border p-4",children:j&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"font-medium",children:[j.company," - ",j.courier_name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Estimasi ",j.duration]}),e.jsx("p",{className:"text-batik-indigo mt-1 text-sm font-medium",children:B(j.price)})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-batik-brown mb-2 font-semibold",children:"Metode Pembayaran"}),e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsxs("p",{className:"font-medium",children:[L.getValues("paymentMethod")==="bank_transfer"&&"Transfer Bank",L.getValues("paymentMethod")==="e_wallet"&&"E-Wallet"]}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:[L.getValues("paymentMethod")==="bank_transfer"&&"Instruksi pembayaran akan dikirim melalui email",L.getValues("paymentMethod")==="e_wallet"&&"Anda akan diarahkan ke halaman pembayaran"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-batik-brown mb-2 font-semibold",children:"Produk yang Dibeli"}),e.jsx("div",{className:"space-y-4",children:l.map(i=>e.jsxs("div",{className:"flex items-center justify-between border-b pb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:`/storage/${i.image}`,alt:i.name,className:"h-20 w-20 rounded-md object-cover object-center"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"font-medium",children:i.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Jumlah: ",i.quantity]})]})]}),e.jsx("p",{className:"font-medium",children:B(i.price*i.quantity)})]},i.id))})]}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[e.jsx(_,{variant:"outline",onClick:()=>R("payment"),children:"Kembali"}),e.jsx(_,{onClick:mn,disabled:se,className:"bg-batik-indigo hover:bg-batik-indigo/90",children:se?"Memproses...":"Buat Pesanan"})]})]})]})]}),e.jsx("div",{className:"lg:col-span-4",children:e.jsx("div",{className:"sticky top-24",children:e.jsxs(J,{children:[e.jsx(X,{children:e.jsx(Z,{children:"Ringkasan Pesanan"})}),e.jsxs(Q,{className:"space-y-4",children:[e.jsx("div",{className:"space-y-2",children:l.map(i=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[i.name," ",e.jsxs("span",{className:"text-gray-500",children:["x",i.quantity]})]}),e.jsx("span",{children:B(i.price*i.quantity)})]},i.id))}),e.jsx(me,{}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"coupon",children:"Kode Kupon"}),e.jsxs("div",{className:"mt-1 flex",children:[e.jsx(G,{id:"coupon",placeholder:"Masukkan kode kupon",value:D,onChange:i=>C(i.target.value),disabled:!!u,className:"rounded-r-none"}),u?e.jsx(_,{onClick:b,variant:"outline",className:"rounded-l-none border-l-0",disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx("span",{children:"Menghapus..."})]}):"Hapus"}):e.jsx(_,{onClick:an,variant:"outline",className:"rounded-l-none border-l-0",disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx("span",{children:"Menerapkan..."})]}):"Terapkan"})]}),u&&e.jsxs("p",{className:"mt-1 text-xs text-green-600",children:["Kupon ",u.code," diterapkan - Diskon ",u.discount_percent,"%"]})]}),e.jsx(me,{}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Subtotal"}),e.jsx("span",{children:B(le)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Diskon"}),e.jsx("span",{children:de>0?`- ${B(de)}`:"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Pengiriman"}),e.jsx("span",{children:ue>0?B(ue):"-"})]})]}),e.jsx(me,{}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:B(on)})]})]})]})})})]})})},ft=n=>e.jsx(Ee,{children:e.jsx(pt,{...n})});function Mt(n){return e.jsx(mt,{children:e.jsx(ft,{...n})})}export{Mt as default};
