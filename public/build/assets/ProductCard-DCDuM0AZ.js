import{u as h,r as f,K as g,j as s,$ as k,d as t,S as b}from"./app-DfJ_0T5P.js";import{B as x}from"./index-DEqMiAcq.js";import{a as v}from"./formatters-NwLEpD3y.js";import{S as j}from"./use-initials-CmAI_RPG.js";const C=({product:e,className:l=""})=>{const{addToCart:m,isLoading:c}=h(),[p,o]=f.useState(!1),{auth:r}=g().props,d=()=>{if(e.sizes&&e.sizes.length>0){const a=e.sizes.find(i=>i.stock>0);return a?a.size:e.sizes[0].size}return""},n=()=>e.sizes&&e.sizes.length>0?e.sizes.some(a=>a.stock>0):!1,u=a=>{if(a.preventDefault(),a.stopPropagation(),!(r!=null&&r.user)){t.error("Anda harus login untuk menambah produk ke keranjang. Silakan login terlebih dahulu."),b.visit("/login");return}if(!n()){t.error("Produk ini sedang habis stok untuk semua ukuran.");return}const i=d();if(!i){t.error("Ukuran produk tidak tersedia.");return}m({id:e.id,name:e.name,price:e.price,image:e.image,size:i})};return s.jsx("div",{className:`product-card animate-fade-in group ${l}`,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:s.jsxs(k,{href:`/products/${e.slug}`,className:"block",children:[s.jsx("div",{className:"relative overflow-hidden",children:s.jsx("div",{className:"aspect-square overflow-hidden",children:s.jsx("img",{src:e.image,alt:e.name,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-110"})})}),s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-batik-brown group-hover:text-batik-brown/80 line-clamp-2 font-medium transition-colors",children:e.name}),s.jsx("p",{className:"text-batik-indigo mt-1 font-semibold",children:v(e.price)})]}),s.jsx(x,{onClick:u,size:"icon",className:`ml-4 flex-shrink-0 rounded-full transition-transform duration-300 hover:scale-110 ${n()?"bg-batik-brown hover:bg-batik-brown/90":"bg-gray-400 cursor-not-allowed"}`,disabled:c||!n(),children:s.jsx(j,{className:"h-4 w-4"})})]})})]})})};export{C as P};
