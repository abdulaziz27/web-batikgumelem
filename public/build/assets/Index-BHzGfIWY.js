import{r,j as e,L as U,$ as o,S as Q}from"./app-gVp8T97W.js";import{u as X,f as v,A as Y,a as Z,b as ee,c as se,d as ae,e as te,g as le,h as re,i as ie,j as ne,k as oe,l as ce}from"./alert-dialog-BLHL9vFc.js";import{B as C}from"./badge-ReQ3c7EH.js";import{B as l,I as de}from"./index-LawfOneF.js";import{C as b,a as me,c as S}from"./card-M7fCHlBc.js";import{S as y,a as k,b as D,c as P,d as g}from"./select-D8scCLju.js";import{S as he}from"./separator-Cwt7ySMx.js";import{T as ge,a as xe,b as x,c as ue,d as pe,e as T}from"./table-BnA9lZZx.js";import{A as je}from"./admin-layout-8SlhGllw.js";import{C as fe,T as A}from"./trash-DPNrKNlC.js";import{S as we}from"./search-D-qBty96.js";import{C as Ne}from"./chevron-left-AGn6Pgkr.js";import{C as ve}from"./use-initials-D-ET1N7w.js";import{A as B}from"./arrow-up-down-bZ5AbEef.js";import{E as M}from"./eye-Bizuqike.js";import{S as R}from"./square-pen-DsTaduh9.js";/* empty css            */import"./app-sidebar-header-CVHIOqUw.js";import"./app-logo-icon-C3zniST_.js";import"./breadcrumb-Cfb6gRVV.js";import"./Combination-CeemgJ7w.js";import"./index-e5tALGcz.js";import"./index-CAefynKf.js";import"./chevron-down-uaylTW6H.js";import"./chevron-up-CAESLesO.js";import"./package-BiWjSXjr.js";import"./pencil-6NnavDoC.js";const Ce=[{title:"Dasbor",href:"/admin/dashboard"},{title:"Blog",href:"/admin/blogs"}];function Qe({blogs:V,categories:F}){var w;const[I,d]=r.useState(!1),[n,u]=r.useState(null),[z,K]=r.useState([]),[L,E]=r.useState([]),[$,H]=r.useState(!1),[m,O]=r.useState(""),[c,W]=r.useState("all");r.useEffect(()=>{const s=()=>{H(window.innerWidth<768)};return s(),window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}},[]);const p=s=>new Date(s).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}),j=[{accessorKey:"image",header:"Gambar",cell:({row:s})=>{const a=s.original;return e.jsx("img",{src:a.image?`/storage/${a.image}`:"/placeholder-image.jpg",alt:a.title,className:"h-10 w-16 rounded-sm object-cover"})},enableSorting:!1},{accessorKey:"title",header:({column:s})=>e.jsx("div",{className:"flex items-center",children:e.jsxs(l,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"p-0 hover:bg-transparent",children:["Judul",e.jsx(B,{className:"ml-2 h-4 w-4"})]})}),cell:({row:s})=>e.jsx("span",{className:"font-medium",children:s.getValue("title")}),enableColumnFilter:!0,filterFn:"includesString"},{accessorKey:"category",header:"Kategori",cell:({row:s})=>e.jsx(C,{variant:"outline",children:s.getValue("category")}),enableColumnFilter:!0,filterFn:(s,a,i)=>!i||i==="all"?!0:s.getValue(a)===i},{accessorKey:"author",header:"Penulis"},{accessorKey:"created_at",header:({column:s})=>e.jsx("div",{className:"flex items-center",children:e.jsxs(l,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"p-0 hover:bg-transparent",children:["Tanggal",e.jsx(B,{className:"ml-2 h-4 w-4"})]})}),cell:({row:s})=>p(s.getValue("created_at")),sortingFn:(s,a,i)=>{const h=new Date(s.getValue(i)).getTime(),N=new Date(a.getValue(i)).getTime();return h<N?-1:h>N?1:0}},{id:"actions",header:"Aksi",cell:({row:s})=>{const a=s.original;return e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(l,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(o,{href:`/admin/blogs/${a.id}`,children:e.jsx(M,{className:"h-4 w-4"})})}),e.jsx(l,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(o,{href:`/admin/blogs/${a.id}/edit`,children:e.jsx(R,{className:"h-4 w-4"})})}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>f(a),children:e.jsx(A,{className:"h-4 w-4"})})]})},enableSorting:!1}],t=X({data:V,columns:j,getCoreRowModel:ce(),getPaginationRowModel:oe(),getFilteredRowModel:ne(),onSortingChange:K,getSortedRowModel:ie(),onColumnFiltersChange:E,state:{sorting:z,columnFilters:L,pagination:{pageIndex:0,pageSize:10}},initialState:{pagination:{pageSize:10}},enableSorting:!0,enableFilters:!0});r.useEffect(()=>{if(!t||!t.getColumn("title"))return;const s=setTimeout(()=>{var a;(a=t.getColumn("title"))==null||a.setFilterValue(m)},300);return()=>clearTimeout(s)},[m,t]),r.useEffect(()=>{var s;!t||!t.getColumn("category")||(s=t.getColumn("category"))==null||s.setFilterValue(c==="all"?null:c)},[c,t]);const f=s=>{u(s),d(!0)},_=()=>{n&&Q.delete(`/admin/blogs/${n.id}`,{onSuccess:()=>{d(!1),u(null)}})},q=s=>{W(s)},G=s=>{t.setPageSize(Number(s))},J=()=>t.getRowModel().rows.map(s=>{const a=s.original;return e.jsx(b,{className:"mb-4",children:e.jsxs(S,{className:"p-4",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-3",children:[e.jsx("img",{src:a.image?`/storage/${a.image}`:"/placeholder-image.jpg",alt:a.title,className:"h-16 w-24 rounded-md object-cover"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:a.title}),e.jsx(C,{variant:"outline",className:"mt-1",children:a.category})]})]}),e.jsxs("div",{className:"my-2 grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"Author"}),e.jsx("p",{className:"font-medium",children:a.author})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"Date"}),e.jsx("p",{className:"font-medium",children:p(a.created_at)})]})]}),e.jsxs("div",{className:"mt-3 flex justify-end space-x-2",children:[e.jsx(l,{variant:"outline",size:"sm",asChild:!0,className:"h-9 px-3 py-1",children:e.jsxs(o,{href:`/admin/blogs/${a.id}`,children:[e.jsx(M,{className:"mr-1 h-4 w-4"})," View"]})}),e.jsx(l,{variant:"outline",size:"sm",asChild:!0,className:"h-9 px-3 py-1",children:e.jsxs(o,{href:`/admin/blogs/${a.id}/edit`,children:[e.jsx(R,{className:"mr-1 h-4 w-4"})," Edit"]})}),e.jsxs(l,{variant:"outline",size:"sm",className:"h-9 px-3 py-1",onClick:()=>f(a),children:[e.jsx(A,{className:"mr-1 h-4 w-4"})," Delete"]})]})]})},a.id)});return e.jsxs(je,{breadcrumbs:Ce,children:[e.jsx(U,{title:"Manajemen Blog"}),e.jsxs("div",{className:"space-y-6 p-3 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Manajemen Blog"}),e.jsx(l,{asChild:!0,className:"w-full sm:w-auto",children:e.jsxs(o,{href:"/admin/blogs/create",children:[e.jsx(fe,{className:"mr-2 h-4 w-4"}),"Tambah Blog"]})})]}),e.jsx(he,{}),e.jsxs(b,{children:[e.jsx(me,{className:"px-4 py-4 sm:px-6",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"relative w-full sm:max-w-xs",children:[e.jsx(we,{className:"text-muted-foreground absolute top-2.5 left-2.5 h-4 w-4"}),e.jsx(de,{type:"search",placeholder:"Cari blog...",value:m,onChange:s=>O(s.target.value),className:"w-full pl-8"})]}),e.jsxs(y,{value:c,onValueChange:q,children:[e.jsx(k,{className:"w-full sm:w-[180px]",children:e.jsx(D,{placeholder:"Filter kategori"})}),e.jsxs(P,{children:[e.jsx(g,{value:"all",children:"Semua Kategori"}),F.map(s=>e.jsx(g,{value:s,children:s},s))]})]})]})}),e.jsxs(S,{className:"px-4 sm:px-6",children:[e.jsx("div",{className:"rounded-md border",children:$?e.jsx("div",{className:"divide-y",children:t.getRowModel().rows.length>0?J():e.jsx("div",{className:"text-muted-foreground py-10 text-center",children:"Tidak ada blog ditemukan"})}):e.jsxs(ge,{children:[e.jsx(xe,{children:t.getHeaderGroups().map(s=>e.jsx(x,{children:s.headers.map(a=>e.jsx(ue,{children:a.isPlaceholder?null:v(a.column.columnDef.header,a.getContext())},a.id))},s.id))}),e.jsx(pe,{children:(w=t.getRowModel().rows)!=null&&w.length?t.getRowModel().rows.map(s=>e.jsx(x,{children:s.getVisibleCells().map(a=>e.jsx(T,{children:v(a.column.columnDef.cell,a.getContext())},a.id))},s.id)):e.jsx(x,{children:e.jsx(T,{colSpan:j.length,className:"h-24 text-center",children:"Tidak ada blog ditemukan"})})})]})}),e.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 p-4 sm:flex-row",children:[e.jsxs("div",{className:"flex w-full items-center gap-2 sm:w-auto",children:[e.jsx("p",{className:"text-sm font-medium whitespace-nowrap",children:"Baris per halaman"}),e.jsxs(y,{value:String(t.getState().pagination.pageSize),onValueChange:G,children:[e.jsx(k,{className:"h-8 w-[80px]",children:e.jsx(D,{placeholder:t.getState().pagination.pageSize})}),e.jsx(P,{side:"top",children:[5,10,20,30,50,100].map(s=>e.jsx(g,{value:`${s}`,children:s},s))})]})]}),e.jsx("div",{className:"flex w-full items-center justify-center sm:w-auto",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(l,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>t.setPageIndex(0),disabled:!t.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Ke halaman pertama"}),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevrons-left",children:[e.jsx("path",{d:"m11 17-5-5 5-5"}),e.jsx("path",{d:"m18 17-5-5 5-5"})]})]}),e.jsxs(l,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Ke halaman sebelumnya"}),e.jsx(Ne,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm",children:"Halaman"}),e.jsxs("strong",{className:"text-sm font-medium",children:[t.getState().pagination.pageIndex+1," dari ",t.getPageCount()]})]}),e.jsxs(l,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Ke halaman berikutnya"}),e.jsx(ve,{className:"h-4 w-4"})]}),e.jsxs(l,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>t.setPageIndex(t.getPageCount()-1),disabled:!t.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Ke halaman terakhir"}),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevrons-right",children:[e.jsx("path",{d:"m6 17 5-5-5-5"}),e.jsx("path",{d:"m13 17 5-5-5-5"})]})]})]})})]})]})]})]}),e.jsx(Y,{open:I,onOpenChange:d,children:e.jsxs(Z,{children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Apakah Anda yakin?"}),e.jsxs(ae,{children:["Tindakan ini tidak dapat dibatalkan. Ini akan menghapus blog ",e.jsx("span",{className:"font-medium",children:n==null?void 0:n.title})," ","secara permanen dan menghapus datanya dari server."]})]}),e.jsxs(te,{children:[e.jsx(le,{children:"Batal"}),e.jsx(re,{onClick:_,children:"Hapus"})]})]})})]})}export{Qe as default};
