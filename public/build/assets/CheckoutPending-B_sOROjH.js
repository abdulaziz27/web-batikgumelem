import{r as n,S as o,j as e,L as g}from"./app-C2CPBORD.js";import{L as y}from"./Layout-C5gfhG3T.js";import{B as r}from"./index-DXA0Juze.js";import{C as k,a as N,b as w,c as v,d as C}from"./card-0wfsc4SL.js";import{f as P}from"./formatters-BdPsR_AQ.js";import{C as S}from"./clock-D905DNSU.js";import{R as L}from"./refresh-cw-C5XIlIYe.js";/* empty css            */import"./use-initials-BkezIM7N.js";import"./Combination-Dj-ZwytL.js";import"./map-pin-B6NwVNmx.js";import"./badge-Cw30zDw6.js";const K=({order:a})=>{const[s,l]=n.useState(!1),[x,c]=n.useState("");n.useEffect(()=>{const t=()=>{const h=new Date(a.created_at),f=new Date(h.getTime()+24*60*60*1e3),p=new Date,i=f.getTime()-p.getTime();if(i>0){const j=Math.floor(i/36e5),b=Math.floor(i%(1e3*60*60)/(1e3*60));c(`${j} jam ${b} menit`)}else c("Waktu pembayaran telah habis"),o.visit(`/checkout/failed?order_id=${a.id}`)};t();const u=setInterval(t,6e4);return()=>clearInterval(u)},[a]),n.useEffect(()=>{let t=null;return t=setInterval(m,2e4),()=>{t&&clearInterval(t)}},[]);const m=()=>{s||(l(!0),o.visit(`/checkout/check-status/${a.id}`,{onFinish:()=>l(!1),preserveState:!0}))},d=()=>{a.payment_url&&(window.location.href=a.payment_url)};return e.jsxs(y,{children:[e.jsx(g,{title:"Menunggu Pembayaran"}),e.jsx("div",{className:"container mx-auto px-4 py-12 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"mx-auto max-w-3xl",children:[e.jsx("div",{className:"mb-8",children:e.jsx("h1",{className:"text-batik-brown text-2xl font-bold tracking-tight",children:"Menunggu Pembayaran"})}),e.jsxs(k,{children:[e.jsxs(N,{children:[e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-yellow-100",children:e.jsx(S,{className:"h-8 w-8 text-yellow-600"})})}),e.jsx(w,{className:"text-center text-xl",children:"Selesaikan Pembayaran Anda"})]}),e.jsxs(v,{children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Pesanan Anda telah dibuat. Silakan selesaikan pembayaran sebelum batas waktu berakhir."}),e.jsxs("p",{className:"mt-2 font-medium text-yellow-600",children:["Sisa waktu: ",x]})]}),e.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[e.jsx("p",{className:"font-medium",children:"Detail Pesanan"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Nomor Pesanan: ",a.order_number]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Total: ",P(a.total_amount)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Status:"," ",e.jsx("span",{className:"rounded-full bg-yellow-100 px-2 py-1 text-xs font-medium text-yellow-800",children:"Menunggu Pembayaran"})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[e.jsx(r,{onClick:d,className:"bg-batik-indigo hover:bg-batik-indigo/90",children:"Lanjutkan Pembayaran"}),e.jsxs(r,{onClick:m,disabled:s,variant:"outline",className:"flex items-center",children:[e.jsx(L,{className:`mr-1 h-3 w-3 ${s?"animate-spin":""}`}),s?"Memeriksa...":"Perbarui Status Pembayaran"]})]})]})]}),e.jsx(C,{className:"flex justify-center",children:e.jsx(r,{asChild:!0,variant:"outline",children:e.jsx("a",{href:"/",children:"Kembali ke Beranda"})})})]})]})})]})};export{K as default};
