import{r as n,j as e,L as P,$ as g,S as A}from"./app-Bp9nRReo.js";import{u as T,f as p,A as R,a as I,b as K,c as M,d as B,e as V,g as F,h as L,i as H,j as _,k as $,l as z}from"./alert-dialog-BEnf8Ftf.js";import{B as E}from"./badge-D3rnaFmZ.js";import{B as l,I as O}from"./index-l7CZPZS1.js";import{C as W,a as q,c as U}from"./card-CetfL4z6.js";import{S as G,a as J,b as Q,c as X,d as Y}from"./select-1jQK7ZKn.js";import{S as Z}from"./separator-COXmB-Vn.js";import{T as ee,a as ae,b as d,c as se,d as te,e as u}from"./table-BHnGdrxc.js";import{A as le}from"./admin-layout-DREqibY-.js";import{f as j}from"./formatters-NwLEpD3y.js";import{C as ne,T as re}from"./trash-oNplslDm.js";import{S as ie}from"./search-C2SqgIW4.js";import{C as oe}from"./chevron-left-DYHvcPL5.js";import{C as ce}from"./use-initials-D77uNnFN.js";import{A as i}from"./arrow-up-down-xTF74Rih.js";import{S as de}from"./square-pen-CrLIZnOS.js";/* empty css            */import"./app-sidebar-header-BGi3Yk0k.js";import"./app-logo-icon-Xb_zdXJm.js";import"./breadcrumb-w_CKQSPy.js";import"./Combination-BK1ypCM2.js";import"./index-tHZ4x5gI.js";import"./index-BNIm7s8w.js";import"./chevron-down-BXlZGt2q.js";import"./chevron-up-BSPD_Nkr.js";import"./package-C1-o2eYj.js";import"./pencil-BeCMnxdn.js";const me=[{title:"Dasbor",href:"/admin/dashboard"},{title:"Kupon",href:"/admin/coupons"}];function He({coupons:f}){var x;const[w,o]=n.useState(!1),[r,m]=n.useState(null),[v,N]=n.useState([]),[C,S]=n.useState([]),[c,b]=n.useState(""),h=[{accessorKey:"code",header:({column:a})=>e.jsx("div",{className:"flex items-center",children:e.jsxs(l,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),className:"p-0 hover:bg-transparent",children:["Kode",e.jsx(i,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>e.jsx("span",{className:"font-medium",children:a.getValue("code")}),enableColumnFilter:!0,filterFn:"includesString"},{accessorKey:"discount_percent",header:({column:a})=>e.jsx("div",{className:"flex items-center",children:e.jsxs(l,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),className:"p-0 hover:bg-transparent",children:["Diskon",e.jsx(i,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>`${a.getValue("discount_percent")}%`},{accessorKey:"valid_from",header:({column:a})=>e.jsx("div",{className:"flex items-center",children:e.jsxs(l,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),className:"p-0 hover:bg-transparent",children:["Berlaku Dari",e.jsx(i,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>j(a.getValue("valid_from"))},{accessorKey:"valid_until",header:({column:a})=>e.jsx("div",{className:"flex items-center",children:e.jsxs(l,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),className:"p-0 hover:bg-transparent",children:["Berlaku Sampai",e.jsx(i,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>j(a.getValue("valid_until"))},{accessorKey:"active",header:"Status",cell:({row:a})=>{const t=a.getValue("active");return e.jsx(E,{variant:t?"default":"outline",children:t?"Aktif":"Nonaktif"})}},{id:"actions",header:"Aksi",cell:({row:a})=>{const t=a.original;return e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(l,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(g,{href:`/admin/coupons/${t.id}/edit`,children:e.jsx(de,{className:"h-4 w-4"})})}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>k(t),children:e.jsx(re,{className:"h-4 w-4"})})]})},enableSorting:!1}],s=T({data:f.data,columns:h,getCoreRowModel:z(),getPaginationRowModel:$(),getFilteredRowModel:_(),onSortingChange:N,getSortedRowModel:H(),onColumnFiltersChange:S,state:{sorting:v,columnFilters:C,pagination:{pageIndex:0,pageSize:10}},initialState:{pagination:{pageSize:10}},enableSorting:!0,enableFilters:!0});n.useEffect(()=>{if(!s||!s.getColumn("code"))return;const a=setTimeout(()=>{var t;(t=s.getColumn("code"))==null||t.setFilterValue(c)},300);return()=>clearTimeout(a)},[c,s]);const k=a=>{m(a),o(!0)},y=()=>{r&&A.delete(`/admin/coupons/${r.id}`,{onSuccess:()=>{o(!1),m(null)}})},D=a=>{s.setPageSize(Number(a))};return e.jsxs(le,{breadcrumbs:me,children:[e.jsx(P,{title:"Manajemen Kupon"}),e.jsxs("div",{className:"space-y-6 p-3 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Manajemen Kupon"}),e.jsx(l,{asChild:!0,className:"w-full sm:w-auto",children:e.jsxs(g,{href:"/admin/coupons/create",children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Tambah Kupon"]})})]}),e.jsx(Z,{}),e.jsxs(W,{children:[e.jsx(q,{className:"px-4 py-4 sm:px-6",children:e.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{className:"relative w-full sm:max-w-xs",children:[e.jsx(ie,{className:"text-muted-foreground absolute top-2.5 left-2.5 h-4 w-4"}),e.jsx(O,{type:"search",placeholder:"Cari kupon...",value:c,onChange:a=>b(a.target.value),className:"w-full pl-8"})]})})}),e.jsxs(U,{className:"px-4 sm:px-6",children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(ee,{children:[e.jsx(ae,{children:s.getHeaderGroups().map(a=>e.jsx(d,{children:a.headers.map(t=>e.jsx(se,{children:t.isPlaceholder?null:p(t.column.columnDef.header,t.getContext())},t.id))},a.id))}),e.jsx(te,{children:(x=s.getRowModel().rows)!=null&&x.length?s.getRowModel().rows.map(a=>e.jsx(d,{children:a.getVisibleCells().map(t=>e.jsx(u,{children:p(t.column.columnDef.cell,t.getContext())},t.id))},a.id)):e.jsx(d,{children:e.jsx(u,{colSpan:h.length,className:"h-24 text-center",children:"Tidak ada kupon ditemukan."})})})]})}),e.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 p-4 sm:flex-row",children:[e.jsxs("div",{className:"flex w-full items-center gap-2 sm:w-auto",children:[e.jsx("p",{className:"text-sm font-medium whitespace-nowrap",children:"Baris per halaman"}),e.jsxs(G,{value:String(s.getState().pagination.pageSize),onValueChange:D,children:[e.jsx(J,{className:"h-8 w-[80px]",children:e.jsx(Q,{placeholder:s.getState().pagination.pageSize})}),e.jsx(X,{side:"top",children:[5,10,20,30,50,100].map(a=>e.jsx(Y,{value:`${a}`,children:a},a))})]})]}),e.jsx("div",{className:"flex w-full items-center justify-center sm:w-auto",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(l,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(0),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Ke halaman pertama"}),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevrons-left",children:[e.jsx("path",{d:"m11 17-5-5 5-5"}),e.jsx("path",{d:"m18 17-5-5 5-5"})]})]}),e.jsxs(l,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.previousPage(),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Ke halaman sebelumnya"}),e.jsx(oe,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm",children:"Halaman"}),e.jsxs("strong",{className:"text-sm font-medium",children:[s.getState().pagination.pageIndex+1," dari ",s.getPageCount()]})]}),e.jsxs(l,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.nextPage(),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Ke halaman berikutnya"}),e.jsx(ce,{className:"h-4 w-4"})]}),e.jsxs(l,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(s.getPageCount()-1),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Ke halaman terakhir"}),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevrons-right",children:[e.jsx("path",{d:"m6 17 5-5-5-5"}),e.jsx("path",{d:"m13 17 5-5-5-5"})]})]})]})})]})]})]})]}),e.jsx(R,{open:w,onOpenChange:o,children:e.jsxs(I,{children:[e.jsxs(K,{children:[e.jsx(M,{children:"Apakah Anda yakin?"}),e.jsxs(B,{children:["Tindakan ini tidak dapat dibatalkan. Ini akan menghapus kupon ",e.jsx("span",{className:"font-medium",children:r==null?void 0:r.code})," ","secara permanen dan menghapus datanya dari server."]})]}),e.jsxs(V,{children:[e.jsx(F,{children:"Batal"}),e.jsx(L,{onClick:y,children:"Hapus"})]})]})})]})}export{He as default};
