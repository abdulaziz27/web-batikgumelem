import{r as p,j as e,L as E,S as W}from"./app-C8Sg5s2D.js";import{B as U}from"./badge-sxevUz_k.js";import{c as D,B as I,I as O}from"./index-C-S3fGAe.js";import{C as N,a as v,b,c as y,e as F,d as q}from"./card-CopSugPh.js";import{S as V,a as X,b as G,c as J,d as g}from"./select-DHBOkM9E.js";import{T as Q,a as K,b as j,c as C,d as ee,e as m,f as se}from"./table-D8G-0_pk.js";import{T as te}from"./textarea-Cj6oACzM.js";import{A as ae}from"./admin-layout-DWpYYCAq.js";import{A as ie}from"./arrow-left-DC54rqX-.js";import{c as re,t as M,m as R,a as P,f as ne}from"./format-BlyJTOGp.js";import{C as ce}from"./circle-check-big-CyGtG-An.js";import{T as le}from"./truck-Q1hKBVaM.js";import{P as de}from"./package-BJgREm61.js";import{S as me}from"./use-initials-DV9zzRH8.js";/* empty css            */import"./index-BPKH2BQ1.js";import"./index-CHkRdNmJ.js";import"./chevron-down-fh_NvCDr.js";import"./chevron-up-BURqIUfu.js";import"./app-sidebar-header-DRO6VPKv.js";import"./app-logo-icon-CmBQv6fc.js";import"./breadcrumb-B_Y8H_sI.js";import"./separator-CYLCqqUC.js";import"./pencil-DsSaDhYt.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],z=D("CircleCheck",oe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ue=D("CircleX",he);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],pe=D("Receipt",xe);function ge(s,t){const a=()=>re(t==null?void 0:t.in,NaN),r=ve(s);let l;if(r.date){const c=be(r.date,2);l=ye(c.restDateString,c.year)}if(!l||isNaN(+l))return a();const u=+l;let o=0,h;if(r.time&&(o=Ce(r.time),isNaN(o)))return a();if(r.timezone){if(h=_e(r.timezone),isNaN(h))return a()}else{const c=new Date(u+o),d=M(0,t==null?void 0:t.in);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return M(u+o+h,t==null?void 0:t.in)}const _={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},je=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,fe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Ne=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ve(s){const t={},a=s.split(_.dateTimeDelimiter);let i;if(a.length>2)return t;if(/:/.test(a[0])?i=a[0]:(t.date=a[0],i=a[1],_.timeZoneDelimiter.test(t.date)&&(t.date=s.split(_.timeZoneDelimiter)[0],i=s.substr(t.date.length,s.length))),i){const r=_.timezone.exec(i);r?(t.time=i.replace(r[1],""),t.timezone=r[1]):t.time=i}return t}function be(s,t){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),i=s.match(a);if(!i)return{year:NaN,restDateString:""};const r=i[1]?parseInt(i[1]):null,l=i[2]?parseInt(i[2]):null;return{year:l===null?r:l*100,restDateString:s.slice((i[1]||i[2]).length)}}function ye(s,t){if(t===null)return new Date(NaN);const a=s.match(je);if(!a)return new Date(NaN);const i=!!a[4],r=f(a[1]),l=f(a[2])-1,u=f(a[3]),o=f(a[4]),h=f(a[5])-1;if(i)return we(t,o,h)?Te(t,o,h):new Date(NaN);{const c=new Date(0);return!De(t,l,u)||!Se(t,r)?new Date(NaN):(c.setUTCFullYear(t,l,Math.max(r,u)),c)}}function f(s){return s?parseInt(s):1}function Ce(s){const t=s.match(fe);if(!t)return NaN;const a=k(t[1]),i=k(t[2]),r=k(t[3]);return Ue(a,i,r)?a*R+i*P+r*1e3:NaN}function k(s){return s&&parseFloat(s.replace(",","."))||0}function _e(s){if(s==="Z")return 0;const t=s.match(Ne);if(!t)return 0;const a=t[1]==="+"?-1:1,i=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return Ie(i,r)?a*(i*R+r*P):NaN}function Te(s,t,a){const i=new Date(0);i.setUTCFullYear(s,0,4);const r=i.getUTCDay()||7,l=(t-1)*7+a+1-r;return i.setUTCDate(i.getUTCDate()+l),i}const ke=[31,null,31,30,31,30,31,31,30,31,30,31];function A(s){return s%400===0||s%4===0&&s%100!==0}function De(s,t,a){return t>=0&&t<=11&&a>=1&&a<=(ke[t]||(A(s)?29:28))}function Se(s,t){return t>=1&&t<=(A(s)?366:365)}function we(s,t,a){return t>=1&&t<=53&&a>=0&&a<=6}function Ue(s,t,a){return s===24?t===0&&a===0:a>=0&&a<60&&t>=0&&t<60&&s>=0&&s<25}function Ie(s,t){return t>=0&&t<=59}const Oe=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Orders",href:"/admin/orders"},{title:"Order Details",href:"#"}];function as({order:s,timeline:t}){const[a,i]=p.useState(s.status),[r,l]=p.useState(s.tracking_number||""),[u,o]=p.useState(s.tracking_url||""),[h,c]=p.useState(s.admin_notes||""),[d,T]=p.useState(!1),x=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(n),S=n=>ne(ge(n),"dd MMM yyyy, HH:mm"),$=n=>{switch(n){case"pending":return"default";case"processing":return"secondary";case"shipped":return"default";case"delivered":return"default";case"cancelled":return"destructive";default:return"secondary"}},H=()=>{T(!0),W.post(`/admin/orders/${s.id}`,{_method:"PUT",status:a,tracking_number:r,tracking_url:u,notes:h},{onSuccess:()=>{T(!1)},onError:()=>{T(!1)}})},Y={ShoppingCart:e.jsx(me,{className:"h-6 w-6"}),Package:e.jsx(de,{className:"h-6 w-6"}),Truck:e.jsx(le,{className:"h-6 w-6"}),CheckCircle:e.jsx(ce,{className:"h-6 w-6"}),XCircle:e.jsx(ue,{className:"h-6 w-6"}),Receipt:e.jsx(pe,{className:"h-6 w-6"}),CircleCheck:e.jsx(z,{className:"h-6 w-6"})},L=n=>Y[n]||e.jsx(z,{className:"h-6 w-6"}),w=s.total_amount||s.total_price||0,B=w-(s.shipping_cost||0);return e.jsxs(ae,{breadcrumbs:Oe,children:[e.jsx(E,{title:`Order #${s.order_number||s.id} Details`}),e.jsxs("div",{className:"space-y-6 p-3 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-2 sm:flex-row sm:items-center sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{variant:"outline",size:"icon",asChild:!0,children:e.jsx("a",{href:"/admin/orders",children:e.jsx(ie,{className:"h-4 w-4"})})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Order ",s.order_number||`#${s.id}`]}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Placed on ",S(s.created_at)]})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-3 sm:mt-0",children:[e.jsx(U,{variant:$(s.status),children:s.status.charAt(0).toUpperCase()+s.status.slice(1)}),e.jsxs(U,{variant:s.payment_status==="paid"?"default":"secondary",children:["Payment: ",s.payment_status.charAt(0).toUpperCase()+s.payment_status.slice(1)]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(N,{children:[e.jsx(v,{children:e.jsx(b,{children:"Customer Information"})}),e.jsxs(y,{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Customer"}),e.jsx("div",{children:s.user?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:s.user.name}),e.jsx("div",{className:"text-muted-foreground text-sm",children:s.user.email})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{children:s.guest_name||"Guest"}),e.jsx("div",{className:"text-muted-foreground text-sm",children:s.guest_email})]})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Shipping Address"}),s.shipping_address?e.jsxs("div",{children:[e.jsx("div",{children:s.shipping_address.full_name}),e.jsx("div",{children:s.shipping_address.address_line1}),s.shipping_address.address_line2&&e.jsx("div",{children:s.shipping_address.address_line2}),e.jsxs("div",{children:[s.shipping_address.city,", ",s.shipping_address.state," ",s.shipping_address.postal_code]}),e.jsx("div",{children:s.shipping_address.country}),e.jsx("div",{children:s.shipping_address.phone})]}):e.jsx("div",{className:"text-muted-foreground text-sm",children:"No shipping address provided"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Payment Information"}),e.jsxs("div",{children:[e.jsxs("div",{children:["Method: ",s.payment_method]}),e.jsxs("div",{children:["Status: ",s.payment_status.charAt(0).toUpperCase()+s.payment_status.slice(1)]})]})]})]})]}),e.jsxs(N,{children:[e.jsxs(v,{children:[e.jsx(b,{children:"Order Management"}),e.jsx(F,{children:"Update order status and shipping information"})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"status",children:"Order Status"}),e.jsxs(V,{value:a,onValueChange:i,disabled:d,children:[e.jsx(X,{children:e.jsx(G,{placeholder:"Select status"})}),e.jsxs(J,{children:[e.jsx(g,{value:"pending",children:"Pending"}),e.jsx(g,{value:"processing",children:"Processing"}),e.jsx(g,{value:"shipped",children:"Shipped"}),e.jsx(g,{value:"delivered",children:"Delivered"}),e.jsx(g,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"tracking-number",children:"Tracking Number"}),e.jsx(O,{id:"tracking-number",placeholder:"Enter tracking number",value:r,onChange:n=>l(n.target.value),disabled:d})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"tracking-url",children:"Tracking URL"}),e.jsx(O,{id:"tracking-url",placeholder:"Enter tracking URL",value:u,onChange:n=>o(n.target.value),disabled:d})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"notes",children:"Admin Notes"}),e.jsx(te,{id:"notes",placeholder:"Add notes about this order",value:h,onChange:n=>c(n.target.value),disabled:d,rows:4})]})]}),e.jsx(q,{children:e.jsx(I,{onClick:H,disabled:d,className:"w-full",children:d?"Updating...":"Update Order"})})]})]}),e.jsxs(N,{children:[e.jsx(v,{children:e.jsx(b,{children:"Order Items"})}),e.jsx(y,{children:e.jsxs(Q,{children:[e.jsx(K,{children:e.jsxs(j,{children:[e.jsx(C,{className:"w-[400px]",children:"Product"}),e.jsx(C,{className:"text-right",children:"Price"}),e.jsx(C,{className:"text-right",children:"Quantity"}),e.jsx(C,{className:"text-right",children:"Subtotal"})]})}),e.jsx(ee,{children:s.items.map(n=>e.jsxs(j,{children:[e.jsx(m,{className:"font-medium",children:n.product.name}),e.jsx(m,{className:"text-right",children:x(n.price)}),e.jsx(m,{className:"text-right",children:n.quantity}),e.jsx(m,{className:"text-right",children:x(n.price*n.quantity)})]},n.id))}),e.jsxs(se,{children:[e.jsxs(j,{children:[e.jsx(m,{colSpan:3,children:"Subtotal"}),e.jsx(m,{className:"text-right",children:x(B)})]}),e.jsxs(j,{children:[e.jsx(m,{colSpan:3,children:"Shipping"}),e.jsx(m,{className:"text-right",children:x(s.shipping_cost||0)})]}),e.jsxs(j,{children:[e.jsx(m,{colSpan:3,children:"Total"}),e.jsx(m,{className:"text-right font-bold",children:x(w)})]})]})]})})]}),e.jsxs(N,{children:[e.jsxs(v,{children:[e.jsx(b,{children:"Order Timeline"}),e.jsx(F,{children:"Order status history"})]}),e.jsx(y,{children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"bg-border absolute top-0 left-5 h-full w-px"}),e.jsx("ol",{className:"relative space-y-6",children:t.map((n,Z)=>e.jsxs("li",{className:"relative flex gap-6",children:[e.jsx("div",{className:"bg-background z-10 flex h-10 w-10 shrink-0 items-center justify-center rounded-full border",children:L(n.icon)}),e.jsxs("div",{className:"flex min-h-[40px] flex-col items-start justify-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:n.status}),e.jsx("span",{className:"text-muted-foreground text-sm",children:S(n.date)})]}),e.jsx("p",{className:"text-muted-foreground text-sm",children:n.description})]})]},Z))})]})})]})]})]})}export{as as default};
