import{r as p,j as e,L as A,S as W}from"./app-BTqC0RmZ.js";import{B as P}from"./badge-BVn-KhkZ.js";import{c as v,B as M,I}from"./index-BirychMg.js";import{C as g,a as j,b as f,c as N,e as q,d as E}from"./card-C0btRSnm.js";import{S as V,a as X,b as G,c as J,d as b}from"./select-B2uPX-2S.js";import{T as K,a as Q,b as k,c as D,d as ee,e as d,f as se}from"./table-B9MYNyKn.js";import{T as te}from"./textarea-BRQ7goI8.js";import{A as ae}from"./admin-layout-B8MLDLaQ.js";import{A as ne}from"./arrow-left-BhTHuUAt.js";import{c as ie,t as F,m as R,a as z,f as re}from"./format-BlyJTOGp.js";import{C as ce}from"./circle-check-big-CxzHb8iE.js";import{T as le}from"./truck-xgd1FMfR.js";import{P as de}from"./package-x5_u-lXu.js";import{S as me}from"./use-initials-BxV9BOcn.js";/* empty css            */import"./Combination-1tl-Pnz4.js";import"./index-Ziht1Tlr.js";import"./index-Bv0xGkgh.js";import"./chevron-down-CeDnWhDY.js";import"./chevron-up-DxQQJCLD.js";import"./app-sidebar-header-Ctn_HgWu.js";import"./app-logo-icon-BKmm8oZ6.js";import"./breadcrumb-B21jNVzz.js";import"./separator-CWYrNFeE.js";import"./pencil-CbUz5q1Q.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],U=v("CircleCheck",ue);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],he=v("CircleX",oe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],pe=v("Receipt",xe);function ge(s,t){const a=()=>ie(t==null?void 0:t.in,NaN),r=be(s);let l;if(r.date){const c=ke(r.date,2);l=ye(c.restDateString,c.year)}if(!l||isNaN(+l))return a();const o=+l;let m=0,u;if(r.time&&(m=De(r.time),isNaN(m)))return a();if(r.timezone){if(u=_e(r.timezone),isNaN(u))return a()}else{const c=new Date(o+m),h=F(0,t==null?void 0:t.in);return h.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),h.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),h}return F(o+m+u,t==null?void 0:t.in)}const _={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},je=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,fe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Ne=/^([+-])(\d{2})(?::?(\d{2}))?$/;function be(s){const t={},a=s.split(_.dateTimeDelimiter);let n;if(a.length>2)return t;if(/:/.test(a[0])?n=a[0]:(t.date=a[0],n=a[1],_.timeZoneDelimiter.test(t.date)&&(t.date=s.split(_.timeZoneDelimiter)[0],n=s.substr(t.date.length,s.length))),n){const r=_.timezone.exec(n);r?(t.time=n.replace(r[1],""),t.timezone=r[1]):t.time=n}return t}function ke(s,t){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=s.match(a);if(!n)return{year:NaN,restDateString:""};const r=n[1]?parseInt(n[1]):null,l=n[2]?parseInt(n[2]):null;return{year:l===null?r:l*100,restDateString:s.slice((n[1]||n[2]).length)}}function ye(s,t){if(t===null)return new Date(NaN);const a=s.match(je);if(!a)return new Date(NaN);const n=!!a[4],r=y(a[1]),l=y(a[2])-1,o=y(a[3]),m=y(a[4]),u=y(a[5])-1;if(n)return we(t,m,u)?Ce(t,m,u):new Date(NaN);{const c=new Date(0);return!ve(t,l,o)||!Se(t,r)?new Date(NaN):(c.setUTCFullYear(t,l,Math.max(r,o)),c)}}function y(s){return s?parseInt(s):1}function De(s){const t=s.match(fe);if(!t)return NaN;const a=T(t[1]),n=T(t[2]),r=T(t[3]);return Pe(a,n,r)?a*R+n*z+r*1e3:NaN}function T(s){return s&&parseFloat(s.replace(",","."))||0}function _e(s){if(s==="Z")return 0;const t=s.match(Ne);if(!t)return 0;const a=t[1]==="+"?-1:1,n=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return Me(n,r)?a*(n*R+r*z):NaN}function Ce(s,t,a){const n=new Date(0);n.setUTCFullYear(s,0,4);const r=n.getUTCDay()||7,l=(t-1)*7+a+1-r;return n.setUTCDate(n.getUTCDate()+l),n}const Te=[31,null,31,30,31,30,31,31,30,31,30,31];function H(s){return s%400===0||s%4===0&&s%100!==0}function ve(s,t,a){return t>=0&&t<=11&&a>=1&&a<=(Te[t]||(H(s)?29:28))}function Se(s,t){return t>=1&&t<=(H(s)?366:365)}function we(s,t,a){return t>=1&&t<=53&&a>=0&&a<=6}function Pe(s,t,a){return s===24?t===0&&a===0:a>=0&&a<60&&t>=0&&t<60&&s>=0&&s<25}function Me(s,t){return t>=0&&t<=59}const Ie=[{title:"Dasbor",href:"/admin/dashboard"},{title:"Pesanan",href:"/admin/orders"},{title:"Detail Pesanan",href:"#"}];function ns({order:s,timeline:t}){const[a,n]=p.useState(s.status),[r,l]=p.useState(s.tracking_number||""),[o,m]=p.useState(s.tracking_url||""),[u,c]=p.useState(s.admin_notes||""),[h,C]=p.useState(!1),x=i=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(i),S=i=>re(ge(i),"dd MMM yyyy, HH:mm"),$=i=>{switch(i){case"pending":return"default";case"processing":return"secondary";case"shipped":return"default";case"delivered":return"default";case"cancelled":return"destructive";default:return"secondary"}},O=()=>{C(!0),W.post(`/admin/orders/${s.id}`,{_method:"PUT",status:a,tracking_number:r,tracking_url:o,notes:u},{onSuccess:()=>{C(!1)},onError:()=>{C(!1)}})},Y={ShoppingCart:e.jsx(me,{className:"h-6 w-6"}),Package:e.jsx(de,{className:"h-6 w-6"}),Truck:e.jsx(le,{className:"h-6 w-6"}),CheckCircle:e.jsx(ce,{className:"h-6 w-6"}),XCircle:e.jsx(he,{className:"h-6 w-6"}),Receipt:e.jsx(pe,{className:"h-6 w-6"}),CircleCheck:e.jsx(U,{className:"h-6 w-6"})},B=i=>Y[i]||e.jsx(U,{className:"h-6 w-6"}),w=s.total_amount||s.total_price||0,L=w-(s.shipping_cost||0);return e.jsxs(ae,{breadcrumbs:Ie,children:[e.jsx(A,{title:`Pesanan #${s.order_number||s.id}`}),e.jsxs("div",{className:"space-y-6 p-3 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-2 sm:flex-row sm:items-center sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{variant:"outline",size:"icon",asChild:!0,children:e.jsx("a",{href:"/admin/orders",children:e.jsx(ne,{className:"h-4 w-4"})})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Pesanan ",s.order_number||`#${s.id}`]}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Dibuat pada ",S(s.created_at)]})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-3 sm:mt-0",children:[e.jsx(P,{variant:$(s.status),children:s.status==="pending"?"Menunggu":s.status==="processing"?"Diproses":s.status==="shipped"?"Dikirim":s.status==="delivered"?"Diterima":s.status==="cancelled"?"Dibatalkan":s.status}),e.jsxs(P,{variant:s.payment_status==="paid"?"default":"secondary",children:["Pembayaran: ",s.payment_status==="paid"?"Dibayar":s.payment_status==="pending"?"Menunggu":"Gagal"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[e.jsxs(g,{children:[e.jsx(j,{children:e.jsx(f,{children:"Detail Produk"})}),e.jsx(N,{children:e.jsxs(K,{children:[e.jsx(Q,{children:e.jsxs(k,{children:[e.jsx(D,{children:"Produk"}),e.jsx(D,{className:"text-right",children:"Harga"}),e.jsx(D,{className:"text-center",children:"Jumlah"}),e.jsx(D,{className:"text-right",children:"Total"})]})}),e.jsx(ee,{children:s.items.map(i=>e.jsxs(k,{children:[e.jsx(d,{children:i.product.name}),e.jsx(d,{className:"text-right",children:x(i.price)}),e.jsx(d,{className:"text-center",children:i.quantity}),e.jsx(d,{className:"text-right",children:x(i.price*i.quantity)})]},i.id))}),e.jsxs(se,{children:[e.jsxs(k,{children:[e.jsx(d,{colSpan:3,children:"Subtotal"}),e.jsx(d,{className:"text-right",children:x(L)})]}),e.jsxs(k,{children:[e.jsx(d,{colSpan:3,children:"Biaya Pengiriman"}),e.jsx(d,{className:"text-right",children:x(s.shipping_cost)})]}),e.jsxs(k,{children:[e.jsx(d,{colSpan:3,className:"font-bold",children:"Total"}),e.jsx(d,{className:"text-right font-bold",children:x(w)})]})]})]})})]}),e.jsxs(g,{children:[e.jsx(j,{children:e.jsx(f,{children:"Informasi Pelanggan"})}),e.jsx(N,{children:e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-muted-foreground mb-2 text-sm font-medium",children:"Detail Pelanggan"}),e.jsx("p",{className:"font-medium",children:s.user?s.user.name:s.guest_name||"Tamu"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:s.user?s.user.email:s.guest_email})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-muted-foreground mb-2 text-sm font-medium",children:"Metode Pembayaran"}),e.jsx("p",{className:"font-medium",children:s.payment_method}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Status:"," ",s.payment_status==="paid"?"Dibayar":s.payment_status==="pending"?"Menunggu":"Gagal"]})]})]})})]}),e.jsxs(g,{children:[e.jsx(j,{children:e.jsx(f,{children:"Informasi Pengiriman"})}),e.jsx(N,{children:e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-muted-foreground mb-2 text-sm font-medium",children:"Alamat Pengiriman"}),s.shipping_address?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-medium",children:s.shipping_address.full_name}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:[s.shipping_address.address_line1,s.shipping_address.address_line2&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),s.shipping_address.address_line2]}),e.jsx("br",{}),s.shipping_address.city,", ",s.shipping_address.state," ",s.shipping_address.postal_code,e.jsx("br",{}),s.shipping_address.country,e.jsx("br",{}),"Telepon: ",s.shipping_address.phone]})]}):e.jsx("p",{className:"text-muted-foreground",children:"Tidak ada alamat pengiriman"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-muted-foreground mb-2 text-sm font-medium",children:"Status Pengiriman"}),e.jsx("p",{className:"font-medium",children:s.status==="pending"?"Menunggu":s.status==="processing"?"Diproses":s.status==="shipped"?"Dikirim":s.status==="delivered"?"Diterima":s.status==="cancelled"?"Dibatalkan":s.status}),s.tracking_number&&e.jsxs("p",{className:"text-muted-foreground text-sm",children:["No. Resi: ",s.tracking_number,s.tracking_url&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("a",{href:s.tracking_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Lacak Pengiriman"})]})]})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(g,{children:[e.jsxs(j,{children:[e.jsx(f,{children:"Kelola Pesanan"}),e.jsx(q,{children:"Perbarui status dan informasi pengiriman"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"status",className:"text-sm font-medium",children:"Status Pesanan"}),e.jsxs(V,{value:a,onValueChange:n,children:[e.jsx(X,{id:"status",children:e.jsx(G,{})}),e.jsxs(J,{children:[e.jsx(b,{value:"pending",children:"Menunggu"}),e.jsx(b,{value:"processing",children:"Diproses"}),e.jsx(b,{value:"shipped",children:"Dikirim"}),e.jsx(b,{value:"delivered",children:"Diterima"}),e.jsx(b,{value:"cancelled",children:"Dibatalkan"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"tracking_number",className:"text-sm font-medium",children:"Nomor Resi"}),e.jsx(I,{id:"tracking_number",value:r,onChange:i=>l(i.target.value),placeholder:"Masukkan nomor resi"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"tracking_url",className:"text-sm font-medium",children:"Link Pelacakan"}),e.jsx(I,{id:"tracking_url",value:o,onChange:i=>m(i.target.value),placeholder:"Masukkan link pelacakan"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"notes",className:"text-sm font-medium",children:"Catatan Admin"}),e.jsx(te,{id:"notes",value:u,onChange:i=>c(i.target.value),placeholder:"Tambahkan catatan internal",rows:4})]})]}),e.jsx(E,{children:e.jsx(M,{onClick:O,disabled:h,className:"w-full",children:h?"Menyimpan...":"Simpan Perubahan"})})]}),e.jsxs(g,{children:[e.jsx(j,{children:e.jsx(f,{children:"Riwayat Pesanan"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:t.map((i,Z)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"text-muted-foreground flex h-6 w-6 items-center justify-center",children:B(i.icon)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i.status==="pending"?"Menunggu":i.status==="processing"?"Diproses":i.status==="shipped"?"Dikirim":i.status==="delivered"?"Diterima":i.status==="cancelled"?"Dibatalkan":i.status}),e.jsx("p",{className:"text-muted-foreground text-sm",children:i.description}),e.jsx("p",{className:"text-muted-foreground text-sm",children:S(i.date)})]})]},Z))})})]})]})]})]})]})}export{ns as default};
