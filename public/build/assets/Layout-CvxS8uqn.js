import{a as P,r as f,j as e,K as M,d as A,$ as s,u as I,A as _}from"./app-gVp8T97W.js";import{c as j,B as b,I as $}from"./index-LawfOneF.js";import{X as v,u as F,D as K,b as L,A as T,c as q,d as G,e as E,f as U,g as D,h as O,i as N,S as w}from"./use-initials-D-ET1N7w.js";import{M as Q}from"./map-pin-De9-IGzt.js";import{B as y}from"./badge-ReQ3c7EH.js";async function H(l){try{return(await P.post("/api/ai-chat",{question:l})).data.answer}catch{return"Maaf, terjadi gangguan teknis. Silakan coba lagi atau hubungi admin."}}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],J=j("Mail",R);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],W=j("Menu",V);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Y=j("MessageSquare",X);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],ee=j("Phone",Z);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ae=j("Send",se);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],S=j("User",te),ie=()=>{const[l,i]=f.useState(!1),[t,a]=f.useState(""),[c,d]=f.useState([{id:1,text:"Halo! Selamat datang di Batik Gumelem. Ada yang bisa saya bantu?",sender:"bot",timestamp:new Date}]),[x,h]=f.useState(!1),u=()=>{i(!l)},g=async r=>{if(r.preventDefault(),!t.trim())return;const o={id:c.length+1,text:t,sender:"user",timestamp:new Date};d(m=>[...m,o]),a(""),h(!0);try{const m=await H(t),p={id:c.length+2,text:m,sender:"bot",timestamp:new Date};d(k=>[...k,p])}catch{d(m=>[...m,{id:c.length+2,text:"Maaf, terjadi gangguan teknis. Silakan coba lagi atau hubungi admin.",sender:"bot",timestamp:new Date}])}finally{h(!1)}};return e.jsxs("div",{className:"fixed right-6 bottom-6 z-50",children:[e.jsx(b,{onClick:u,className:`flex h-14 w-14 items-center justify-center rounded-full shadow-lg ${l?"bg-red-500 hover:bg-red-600":"bg-batik-indigo hover:bg-batik-indigo/90"}`,size:"icon","aria-label":"Chat dengan kami",children:l?e.jsx(v,{className:"h-6 w-6"}):e.jsx(Y,{className:"h-6 w-6"})}),l&&e.jsxs("div",{className:"absolute right-0 bottom-20 w-80 overflow-hidden rounded-lg border bg-white shadow-2xl sm:w-96",children:[e.jsxs("div",{className:"bg-batik-indigo flex items-center justify-between p-4",children:[e.jsx("h2",{className:"font-medium text-white",children:"Chat dengan Kami"}),e.jsx(b,{variant:"ghost",size:"icon",onClick:u,className:"hover:bg-batik-indigo/80 text-white",children:e.jsx(v,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex h-96 flex-col",children:[e.jsx("div",{className:"flex-1 space-y-4 overflow-y-auto p-4",children:c.map(r=>e.jsx("div",{className:`flex ${r.sender==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${r.sender==="user"?"bg-batik-indigo rounded-tr-none text-white":"rounded-tl-none bg-gray-100 text-gray-800"}`,children:[r.sender==="bot"&&e.jsxs("div",{className:"mb-1 flex items-center",children:[e.jsx("div",{className:"bg-batik-brown mr-1 flex h-5 w-5 items-center justify-center rounded-full",children:e.jsx(S,{className:"h-3 w-3 text-white"})}),e.jsx("span",{className:"text-xs font-semibold",children:"Admin"})]}),e.jsx("p",{className:"text-sm",children:r.text}),e.jsx("span",{className:"mt-1 block text-right text-xs opacity-70",children:r.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},r.id))}),e.jsxs("form",{onSubmit:g,className:"flex items-center gap-2 border-t p-3",children:[e.jsx($,{value:t,onChange:r=>a(r.target.value),placeholder:"Tulis pesan...",className:"flex-1",disabled:x}),e.jsx(b,{type:"submit",size:"icon",className:"bg-batik-indigo hover:bg-batik-indigo/90",disabled:!t.trim()||x,children:x?e.jsx("span",{className:"animate-spin",children:"..."}):e.jsx(ae,{className:"h-4 w-4"})})]})]})]})]})},re=({children:l})=>{const i=M().props,{flash:t}=i;return f.useEffect(()=>{const a=o=>typeof o=="function"?o():o||null,c=(o,m)=>{o&&(m==="success"?A.success(o,{duration:3e3,position:"bottom-right"}):A.error(o,{duration:3e3,position:"bottom-right"}))},d=a(t==null?void 0:t.success),x=a(t==null?void 0:t.error),h=a(t==null?void 0:t.message),u=i.success,g=i.error,r=i.message;x?c(x,"error"):g&&c(g,"error"),d?c(d,"success"):u?c(u,"success"):h?c(h,"success"):r&&c(r,"success")},[i]),e.jsx(e.Fragment,{children:l})},ne=()=>e.jsx("footer",{className:"bg-batik-cream/50 batik-pattern",children:e.jsxs("div",{className:"container mx-auto px-6 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-batik-brown font-serif text-2xl font-bold",children:["Batik",e.jsx("span",{className:"text-batik-indigo",children:"Gumelem"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Melestarikan warisan budaya Batik Gumelem dari Banjarnegara, Jawa Tengah. Setiap kain batik kami dibuat dengan teknik tradisional dan mengandung filosofi mendalam."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-batik-brown text-sm font-semibold tracking-wider uppercase",children:"Quick Links"}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(s,{href:"/",className:"hover:text-batik-indigo block text-sm text-gray-600",children:"Beranda"}),e.jsx(s,{href:"/history",className:"hover:text-batik-indigo block text-sm text-gray-600",children:"Sejarah"}),e.jsx(s,{href:"/products",className:"hover:text-batik-indigo block text-sm text-gray-600",children:"Produk"}),e.jsx(s,{href:"/blog",className:"hover:text-batik-indigo block text-sm text-gray-600",children:"Blog"}),e.jsx(s,{href:"/faq",className:"hover:text-batik-indigo block text-sm text-gray-600",children:"FAQ"}),e.jsx(s,{href:"/about",className:"hover:text-batik-indigo block text-sm text-gray-600",children:"Tentang Kami"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-batik-brown text-sm font-semibold tracking-wider uppercase",children:"Customer Service"}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(s,{href:"/faq",className:"hover:text-batik-indigo block text-sm text-gray-600",children:"FAQ"}),e.jsx(s,{href:"/shipping",className:"hover:text-batik-indigo block text-sm text-gray-600",children:"Shipping & Returns"}),e.jsx(s,{href:"/terms",className:"hover:text-batik-indigo block text-sm text-gray-600",children:"Terms & Conditions"}),e.jsx(s,{href:"/privacy",className:"hover:text-batik-indigo block text-sm text-gray-600",children:"Privacy Policy"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-batik-brown text-sm font-semibold tracking-wider uppercase",children:"Contact Us"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Q,{className:"text-batik-indigo mr-3 h-5 w-5"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Desa Gumelem Kulon, Kecamatan Susukan, Kabupaten Banjarnegara, Jawa Tengah"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ee,{className:"text-batik-indigo mr-3 h-5 w-5"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"+62 852 1155 3430"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{className:"text-batik-indigo mr-3 h-5 w-5"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"info@batikgumelem.com"})]})]})]})]}),e.jsx("div",{className:"border-batik-brown/10 mt-8 border-t pt-8",children:e.jsxs("p",{className:"text-center text-xs text-gray-500",children:["Â© ",new Date().getFullYear()," BatikGumelem. All rights reserved."]})})]})}),le=()=>{var u,g,r,o,m,p,k,C;const[l,i]=f.useState(!1),{url:t}=M(),{auth:a}=M().props,c=F();let d=0;try{if(a.user){const{cartItems:n}=I();d=n.reduce((B,z)=>B+z.quantity,0)}}catch(n){console.error("Error accessing cart:",n),d=0}const x=[{name:"Beranda",href:"/"},{name:"Sejarah",href:"/history"},{name:"Produk",href:"/products"},{name:"Blog",href:"/blog"},{name:"FAQ",href:"/faq"},{name:"Tentang Kami",href:"/about"}],h=n=>t===n;return e.jsxs("header",{className:"bg-background/95 supports-[backdrop-filter]:bg-background/60 sticky top-0 z-50 w-full backdrop-blur",children:[e.jsx("nav",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex h-20 items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(s,{href:"/",className:"flex-shrink-0",children:e.jsxs("h1",{className:"text-batik-brown font-serif text-2xl font-bold",children:["Batik",e.jsx("span",{className:"text-batik-indigo",children:"Gumelem"})]})}),e.jsx("div",{className:"hidden md:ml-10 md:block",children:e.jsx("div",{className:"flex space-x-8",children:x.map(n=>e.jsx(s,{href:n.href,className:`${h(n.href)?"text-batik-indigo font-semibold":"text-batik-brown hover:text-batik-indigo"} px-3 py-2 text-sm font-medium transition-colors`,children:n.name},n.name))})})]}),e.jsxs("div",{className:"flex items-center",children:[a.user?e.jsxs(K,{children:[e.jsx(L,{asChild:!0,children:e.jsxs(b,{variant:"ghost",size:"sm",className:"mr-4 hidden items-center md:flex",children:[e.jsxs(T,{className:"h-8 w-8",children:[e.jsx(q,{src:a.user.avatar,alt:a.user.name}),e.jsx(G,{className:"bg-batik-indigo text-white",children:c(a.user.name)})]}),e.jsx("span",{className:"text-sm font-medium",children:a.user.name})]})}),e.jsxs(E,{className:"w-56",align:"end",forceMount:!0,children:[e.jsx(U,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm leading-none font-medium",children:(u=a.user)==null?void 0:u.name}),e.jsx("p",{className:"text-muted-foreground text-xs leading-none",children:(g=a.user)==null?void 0:g.email}),e.jsxs("div",{className:"mt-1.5 flex gap-1.5",children:[((o=(r=a.user)==null?void 0:r.roles)==null?void 0:o.includes("admin"))&&e.jsx(y,{variant:"outline",className:"border-red-200 bg-red-50 text-red-700",children:"Admin"}),((p=(m=a.user)==null?void 0:m.roles)==null?void 0:p.includes("user"))&&e.jsx(y,{variant:"outline",className:"border-blue-200 bg-blue-50 text-blue-700",children:"User"})]})]})}),e.jsx(D,{}),e.jsxs(O,{children:[e.jsx(N,{asChild:!0,children:e.jsxs(s,{href:"/settings/profile",className:"flex w-full cursor-pointer items-center",children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Profile"})]})}),(C=(k=a.user)==null?void 0:k.roles)!=null&&C.includes("admin")?e.jsx(N,{asChild:!0,children:e.jsxs(s,{href:"/admin/dashboard",className:"flex w-full cursor-pointer items-center",children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Dashboard Admin"})]})}):e.jsx(N,{asChild:!0,children:e.jsxs(s,{href:"/orders",className:"flex w-full cursor-pointer items-center",children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Pesanan Saya"})]})})]}),e.jsx(D,{}),e.jsx(N,{asChild:!0,children:e.jsxs(s,{href:"/logout",method:"post",as:"button",className:"flex w-full cursor-pointer items-center text-red-600 hover:text-red-700 focus:text-red-700",children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Keluar"})]})})]})]}):e.jsx(s,{href:"/login",className:"mr-4 hidden md:block",children:e.jsxs(b,{variant:"ghost",size:"sm",className:"flex items-center",children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Masuk"]})}),e.jsxs(s,{href:"/cart",className:"relative mr-4",children:[e.jsx(b,{variant:"ghost",size:"icon",children:e.jsx(w,{className:"h-5 w-5"})}),a.user&&d>0&&e.jsx(y,{className:"bg-batik-indigo absolute -top-1 -right-1 text-white",children:d})]}),e.jsx("div",{className:"-mr-2 flex md:hidden",children:e.jsxs(b,{variant:"ghost",size:"icon",onClick:()=>i(!l),children:[e.jsx("span",{className:"sr-only",children:"Open main menu"}),l?e.jsx(v,{className:"block h-6 w-6","aria-hidden":"true"}):e.jsx(W,{className:"block h-6 w-6","aria-hidden":"true"})]})})]})]})}),l&&e.jsx("div",{className:"md:hidden",children:e.jsxs("div",{className:"space-y-1 px-2 pt-2 pb-3 sm:px-3",children:[x.map(n=>e.jsx(s,{href:n.href,className:`${h(n.href)?"bg-batik-cream text-batik-indigo":"text-batik-brown hover:bg-batik-cream hover:text-batik-indigo"} block rounded-md px-3 py-2 text-base font-medium`,onClick:()=>i(!1),children:n.name},n.name)),a.user?e.jsxs(e.Fragment,{children:[e.jsx(s,{href:"/settings/profile",className:"text-batik-brown hover:bg-batik-cream hover:text-batik-indigo block rounded-md px-3 py-2 text-base font-medium",onClick:()=>i(!1),children:"Profil"}),e.jsx(s,{href:"/orders",className:"text-batik-brown hover:bg-batik-cream hover:text-batik-indigo block rounded-md px-3 py-2 text-base font-medium",onClick:()=>i(!1),children:"Pesanan Saya"}),e.jsx(b,{variant:"ghost",className:"text-batik-brown hover:bg-batik-cream hover:text-batik-indigo block w-full rounded-md px-3 py-2 text-left text-base font-medium",onClick:()=>{i(!1),window.history.back()},children:"Kembali"})]}):e.jsx(s,{href:"/login",className:"text-batik-brown hover:bg-batik-cream hover:text-batik-indigo block rounded-md px-3 py-2 text-base font-medium",onClick:()=>i(!1),children:"Masuk / Daftar"})]})})]})},he=({children:l})=>e.jsx(_,{children:e.jsx(re,{children:e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx(le,{}),e.jsx("main",{className:"flex-1",children:l}),e.jsx(ne,{}),e.jsx(ie,{})]})})});export{he as L,J as M,ee as P,S as U};
