import{r as n,j as e,L as y,$ as g,S as D}from"./app-Bp9nRReo.js";import{u as T,f as x,A,a as R,b as I,c as M,d as F,e as V,g as B,h as K,i as L,j as H,k as z,l as $}from"./alert-dialog-BEnf8Ftf.js";import{B as l,I as E}from"./index-l7CZPZS1.js";import{C as O,a as U,c as W}from"./card-CetfL4z6.js";import{S as _,a as q,b as G,c as J,d as Q}from"./select-1jQK7ZKn.js";import{S as X}from"./separator-COXmB-Vn.js";import{T as Y,a as Z,b as c,c as ee,d as ae,e as u}from"./table-BHnGdrxc.js";import{A as se}from"./admin-layout-DREqibY-.js";import{C as te,T as le}from"./trash-oNplslDm.js";import{S as ne}from"./search-C2SqgIW4.js";import{C as re}from"./chevron-left-DYHvcPL5.js";import{C as ie}from"./use-initials-D77uNnFN.js";import{A as p}from"./arrow-up-down-xTF74Rih.js";import{S as oe}from"./square-pen-CrLIZnOS.js";/* empty css            */import"./app-sidebar-header-BGi3Yk0k.js";import"./app-logo-icon-Xb_zdXJm.js";import"./breadcrumb-w_CKQSPy.js";import"./Combination-BK1ypCM2.js";import"./index-tHZ4x5gI.js";import"./index-BNIm7s8w.js";import"./chevron-down-BXlZGt2q.js";import"./chevron-up-BSPD_Nkr.js";import"./package-C1-o2eYj.js";import"./pencil-BeCMnxdn.js";const ce=[{title:"Dasbor",href:"/admin/dashboard"},{title:"Pengguna",href:"/admin/users"}];function Ve({users:j}){var h;const[f,i]=n.useState(!1),[r,d]=n.useState(null),[w,C]=n.useState([]),[N,v]=n.useState([]),[o,S]=n.useState(""),m=[{accessorKey:"name",header:({column:a})=>e.jsx("div",{className:"flex items-center",children:e.jsxs(l,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),className:"p-0 hover:bg-transparent",children:["Nama",e.jsx(p,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>e.jsx("span",{className:"font-medium",children:a.getValue("name")}),enableColumnFilter:!0,filterFn:"includesString"},{accessorKey:"email",header:"Email",cell:({row:a})=>a.getValue("email")},{accessorKey:"role",header:"Role",cell:({row:a})=>a.getValue("role")},{accessorKey:"created_at",header:({column:a})=>e.jsx("div",{className:"flex items-center",children:e.jsxs(l,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),className:"p-0 hover:bg-transparent",children:["Tanggal Bergabung",e.jsx(p,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>a.getValue("created_at")},{id:"actions",header:"Aksi",cell:({row:a})=>{const t=a.original;return e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(l,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(g,{href:`/admin/users/${t.id}/edit`,children:e.jsx(oe,{className:"h-4 w-4"})})}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>b(t),children:e.jsx(le,{className:"h-4 w-4"})})]})},enableSorting:!1}],s=T({data:j,columns:m,getCoreRowModel:$(),getPaginationRowModel:z(),getFilteredRowModel:H(),onSortingChange:C,getSortedRowModel:L(),onColumnFiltersChange:v,state:{sorting:w,columnFilters:N,pagination:{pageIndex:0,pageSize:10}},initialState:{pagination:{pageSize:10}},enableSorting:!0,enableFilters:!0});n.useEffect(()=>{if(!s||!s.getColumn("name"))return;const a=setTimeout(()=>{var t;(t=s.getColumn("name"))==null||t.setFilterValue(o)},300);return()=>clearTimeout(a)},[o,s]);const b=a=>{d(a),i(!0)},k=()=>{r&&D.delete(`/admin/users/${r.id}`,{onSuccess:()=>{i(!1),d(null)}})},P=a=>{s.setPageSize(Number(a))};return e.jsxs(se,{breadcrumbs:ce,children:[e.jsx(y,{title:"Manajemen Pengguna"}),e.jsxs("div",{className:"space-y-6 p-3 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Manajemen Pengguna"}),e.jsx(l,{asChild:!0,className:"w-full sm:w-auto",children:e.jsxs(g,{href:"/admin/users/create",children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),"Tambah Pengguna"]})})]}),e.jsx(X,{}),e.jsxs(O,{children:[e.jsx(U,{className:"px-4 py-4 sm:px-6",children:e.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{className:"relative w-full sm:max-w-xs",children:[e.jsx(ne,{className:"text-muted-foreground absolute top-2.5 left-2.5 h-4 w-4"}),e.jsx(E,{type:"search",placeholder:"Cari pengguna...",value:o,onChange:a=>S(a.target.value),className:"w-full pl-8"})]})})}),e.jsxs(W,{className:"px-4 sm:px-6",children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(Y,{children:[e.jsx(Z,{children:s.getHeaderGroups().map(a=>e.jsx(c,{children:a.headers.map(t=>e.jsx(ee,{children:t.isPlaceholder?null:x(t.column.columnDef.header,t.getContext())},t.id))},a.id))}),e.jsx(ae,{children:(h=s.getRowModel().rows)!=null&&h.length?s.getRowModel().rows.map(a=>e.jsx(c,{children:a.getVisibleCells().map(t=>e.jsx(u,{children:x(t.column.columnDef.cell,t.getContext())},t.id))},a.id)):e.jsx(c,{children:e.jsx(u,{colSpan:m.length,className:"h-24 text-center",children:"Tidak ada pengguna ditemukan."})})})]})}),e.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 p-4 sm:flex-row",children:[e.jsxs("div",{className:"flex w-full items-center gap-2 sm:w-auto",children:[e.jsx("p",{className:"text-sm font-medium whitespace-nowrap",children:"Baris per halaman"}),e.jsxs(_,{value:String(s.getState().pagination.pageSize),onValueChange:P,children:[e.jsx(q,{className:"h-8 w-[80px]",children:e.jsx(G,{placeholder:s.getState().pagination.pageSize})}),e.jsx(J,{side:"top",children:[5,10,20,30,50,100].map(a=>e.jsx(Q,{value:`${a}`,children:a},a))})]})]}),e.jsx("div",{className:"flex w-full items-center justify-center sm:w-auto",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(l,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(0),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Ke halaman pertama"}),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevrons-left",children:[e.jsx("path",{d:"m11 17-5-5 5-5"}),e.jsx("path",{d:"m18 17-5-5 5-5"})]})]}),e.jsxs(l,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.previousPage(),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Ke halaman sebelumnya"}),e.jsx(re,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm",children:"Halaman"}),e.jsxs("strong",{className:"text-sm font-medium",children:[s.getState().pagination.pageIndex+1," dari ",s.getPageCount()]})]}),e.jsxs(l,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.nextPage(),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Ke halaman berikutnya"}),e.jsx(ie,{className:"h-4 w-4"})]}),e.jsxs(l,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(s.getPageCount()-1),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Ke halaman terakhir"}),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevrons-right",children:[e.jsx("path",{d:"m6 17 5-5-5-5"}),e.jsx("path",{d:"m13 17 5-5-5-5"})]})]})]})})]})]})]})]}),e.jsx(A,{open:f,onOpenChange:i,children:e.jsxs(R,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Apakah Anda yakin?"}),e.jsxs(F,{children:["Tindakan ini tidak dapat dibatalkan. Ini akan menghapus pengguna ",e.jsx("span",{className:"font-medium",children:r==null?void 0:r.name})," ","secara permanen dan menghapus datanya dari server."]})]}),e.jsxs(V,{children:[e.jsx(B,{children:"Batal"}),e.jsx(K,{onClick:k,children:"Hapus"})]})]})})]})}export{Ve as default};
