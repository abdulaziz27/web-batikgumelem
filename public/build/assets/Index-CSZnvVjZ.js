import{r as i,j as e,L as O,$ as o,S as W}from"./app-BAWOXTae.js";import{u as U,f as S,A as q,a as J,b as Q,c as X,d as Y,e as Z,g as ee,h as se,i as ae,j as te,k as le,l as ie}from"./alert-dialog-CHc1Hhus.js";import{B as k}from"./badge-K54o-nrv.js";import{B as l,I as re}from"./index-Dzwjf9Tv.js";import{C as b,a as ne,c as y,d as oe}from"./card-BPPPJmjA.js";import{S as P,a as A,b as D,c as F,d as c}from"./select-BBHPYtJZ.js";import{S as ce}from"./separator-BV_joNAG.js";import{T as de,a as me,b as h,c as he,d as xe,e as M}from"./table-BkCUkdAu.js";import{A as ue}from"./admin-layout-BIeDYfM8.js";import{C as ge,T as I}from"./trash-C3Y6YJY5.js";import{S as pe}from"./search-Cb9nPATV.js";import{C as je}from"./chevron-left-DKNr8N2q.js";import{C as fe}from"./use-initials-GWaTr3aM.js";import{A as x}from"./arrow-up-down-BMxEsphk.js";import{E as R}from"./eye-CsbfB0m3.js";import{S as T}from"./square-pen-BHmWZXce.js";/* empty css            */import"./app-sidebar-header-BG-Qnmft.js";import"./app-logo-icon-DQ8l2vYr.js";import"./breadcrumb-NF9ccJPq.js";import"./Combination-DLQmy5E5.js";import"./index-CG73SjvQ.js";import"./index-D6pE_Rjc.js";import"./chevron-down-CPGQYUh7.js";import"./chevron-up-CGh2UdwN.js";import"./package-D6lkpjF1.js";import"./pencil-DjitLObX.js";const we=[{title:"Dasbor",href:"/admin/dashboard"},{title:"Produk",href:"/admin/products"}];function Ue({products:V}){var w,N,v;const[z,d]=i.useState(!1),[r,u]=i.useState(null),[g,L]=i.useState([]),[H,B]=i.useState([]),[E,_]=i.useState(!1),[m,$]=i.useState("");i.useEffect(()=>{const s=()=>{_(window.innerWidth<768)};return s(),window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}},[]);const p=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),j=[{accessorKey:"image_url",header:"Gambar",cell:({row:s})=>{const a=s.getValue("image_url"),n=s.getValue("name");return e.jsx("img",{src:a,alt:n,className:"h-10 w-10 rounded-md object-cover"})},enableSorting:!1},{accessorKey:"name",header:({column:s})=>e.jsxs(l,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"hover:bg-transparent",children:["Nama",e.jsx(x,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>e.jsx("span",{className:"font-medium",children:s.getValue("name")}),enableColumnFilter:!0,filterFn:"includesString"},{accessorKey:"price",header:({column:s})=>e.jsxs(l,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"hover:bg-transparent",children:["Harga",e.jsx(x,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>p(s.getValue("price"))},{accessorKey:"stock",header:({column:s})=>e.jsxs(l,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"hover:bg-transparent",children:["Stok",e.jsx(x,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"is_active",header:"Status",cell:({row:s})=>{const a=s.getValue("is_active");return e.jsx(k,{variant:a?"default":"outline",children:a?"Aktif":"Nonaktif"})},enableColumnFilter:!0,filterFn:(s,a,n)=>{if(n==="all")return!0;const C=s.getValue(a);return n==="active"&&C||n==="inactive"&&!C}},{id:"actions",header:"Aksi",cell:({row:s})=>{const a=s.original;return e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(l,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(o,{href:`/admin/products/${a.id}`,children:e.jsx(R,{className:"h-4 w-4"})})}),e.jsx(l,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(o,{href:`/admin/products/${a.id}/edit`,children:e.jsx(T,{className:"h-4 w-4"})})}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>f(a),children:e.jsx(I,{className:"h-4 w-4"})})]})},enableSorting:!1}],t=U({data:V,columns:j,getCoreRowModel:ie(),getPaginationRowModel:le(),getFilteredRowModel:te(),onSortingChange:s=>{const a=typeof s=="function"?s(g):s;L(a)},getSortedRowModel:ae(),onColumnFiltersChange:B,state:{sorting:g,columnFilters:H},initialState:{pagination:{pageSize:10}},enableSorting:!0,enableFilters:!0});i.useEffect(()=>{if(!t||!t.getColumn("name"))return;const s=setTimeout(()=>{var a;(a=t.getColumn("name"))==null||a.setFilterValue(m)},300);return()=>clearTimeout(s)},[m,t]);const f=s=>{u(s),d(!0)},G=()=>{r&&W.delete(`/admin/products/${r.id}`,{onSuccess:()=>{d(!1),u(null)}})},K=()=>t.getRowModel().rows.map(s=>{const a=s.original;return e.jsx(b,{className:"mb-4",children:e.jsxs(y,{className:"p-4",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-3",children:[e.jsx("img",{src:a.image_url,alt:a.name,className:"h-16 w-16 rounded-md object-cover"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:a.name}),e.jsx(k,{variant:a.is_active?"default":"outline",className:"mt-1",children:a.is_active?"Aktif":"Nonaktif"})]})]}),e.jsxs("div",{className:"my-2 grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"Harga"}),e.jsx("p",{className:"font-medium",children:p(a.price)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"Stok"}),e.jsx("p",{className:"font-medium",children:a.stock})]})]}),e.jsxs("div",{className:"mt-3 flex justify-end space-x-2",children:[e.jsx(l,{variant:"outline",size:"sm",asChild:!0,className:"h-9 px-3 py-1",children:e.jsxs(o,{href:`/admin/products/${a.id}`,children:[e.jsx(R,{className:"mr-1 h-4 w-4"})," Lihat"]})}),e.jsx(l,{variant:"outline",size:"sm",asChild:!0,className:"h-9 px-3 py-1",children:e.jsxs(o,{href:`/admin/products/${a.id}/edit`,children:[e.jsx(T,{className:"mr-1 h-4 w-4"})," Edit"]})}),e.jsxs(l,{variant:"outline",size:"sm",className:"h-9 px-3 py-1",onClick:()=>f(a),children:[e.jsx(I,{className:"mr-1 h-4 w-4"})," Hapus"]})]})]})},a.id)});return e.jsxs(ue,{breadcrumbs:we,children:[e.jsx(O,{title:"Manajemen Produk"}),e.jsxs("div",{className:"space-y-6 p-3 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Manajemen Produk"}),e.jsx(l,{asChild:!0,className:"w-full sm:w-auto",children:e.jsxs(o,{href:"/admin/products/create",children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),"Tambah Produk"]})})]}),e.jsx(ce,{}),e.jsxs(b,{children:[e.jsx(ne,{className:"px-4 py-4 sm:px-6",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"relative w-full sm:max-w-xs",children:[e.jsx(pe,{className:"text-muted-foreground absolute top-2.5 left-2.5 h-4 w-4"}),e.jsx(re,{type:"search",placeholder:"Cari produk...",value:m,onChange:s=>$(s.target.value),className:"w-full pl-8"})]}),e.jsxs(P,{value:((w=t.getColumn("is_active"))==null?void 0:w.getFilterValue())??"all",onValueChange:s=>{var a;return(a=t.getColumn("is_active"))==null?void 0:a.setFilterValue(s)},children:[e.jsx(A,{className:"w-full sm:w-[180px]",children:e.jsx(D,{placeholder:"Filter status"})}),e.jsxs(F,{children:[e.jsx(c,{value:"all",children:"Semua Status"}),e.jsx(c,{value:"active",children:"Aktif"}),e.jsx(c,{value:"inactive",children:"Nonaktif"})]})]})]})}),e.jsx(y,{className:"px-4 sm:px-6",children:E?e.jsx("div",{className:"py-2",children:(N=t.getRowModel().rows)!=null&&N.length?K():e.jsx("div",{className:"text-muted-foreground py-10 text-center",children:"Tidak ada produk ditemukan"})}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(de,{children:[e.jsx(me,{children:t.getHeaderGroups().map(s=>e.jsx(h,{children:s.headers.map(a=>e.jsx(he,{children:a.isPlaceholder?null:S(a.column.columnDef.header,a.getContext())},a.id))},s.id))}),e.jsx(xe,{children:(v=t.getRowModel().rows)!=null&&v.length?t.getRowModel().rows.map(s=>e.jsx(h,{"data-state":s.getIsSelected()&&"selected",children:s.getVisibleCells().map(a=>e.jsx(M,{children:S(a.column.columnDef.cell,a.getContext())},a.id))},s.id)):e.jsx(h,{children:e.jsx(M,{colSpan:j.length,className:"h-24 text-center",children:"Tidak ada produk ditemukan"})})})]})})}),e.jsx(oe,{className:"px-4 py-4 sm:px-6",children:e.jsxs("div",{className:"flex w-full flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"text-muted-foreground text-center text-sm sm:text-left",children:["Menampilkan ",t.getState().pagination.pageIndex*t.getState().pagination.pageSize+1," ke"," ",Math.min((t.getState().pagination.pageIndex+1)*t.getState().pagination.pageSize,t.getFilteredRowModel().rows.length)," ","dari ",t.getFilteredRowModel().rows.length," produk"]}),e.jsxs("div",{className:"flex flex-col items-center gap-4 sm:flex-row sm:gap-6 lg:gap-8",children:[e.jsxs("div",{className:"flex w-full items-center gap-2 sm:w-auto",children:[e.jsx("p",{className:"text-sm font-medium whitespace-nowrap",children:"Baris per halaman"}),e.jsxs(P,{value:`${t.getState().pagination.pageSize}`,onValueChange:s=>{t.setPageSize(Number(s))},children:[e.jsx(A,{className:"h-8 w-[80px]",children:e.jsx(D,{placeholder:t.getState().pagination.pageSize})}),e.jsx(F,{side:"top",children:[5,10,20,30,40,50].map(s=>e.jsx(c,{value:`${s}`,children:s},s))})]})]}),e.jsx("div",{className:"flex w-full items-center justify-center sm:w-auto",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(l,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>t.setPageIndex(0),disabled:!t.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevrons-left",children:[e.jsx("path",{d:"m11 17-5-5 5-5"}),e.jsx("path",{d:"m18 17-5-5 5-5"})]})]}),e.jsxs(l,{variant:"outline",className:"h-8 w-8 p-0 sm:h-9 sm:w-9",onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(je,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm",children:"Halaman"}),e.jsxs("strong",{className:"text-sm font-medium",children:[t.getState().pagination.pageIndex+1," of ",t.getPageCount()]})]}),e.jsxs(l,{variant:"outline",className:"h-8 w-8 p-0 sm:h-9 sm:w-9",onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(fe,{className:"h-4 w-4"})]}),e.jsxs(l,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>t.setPageIndex(t.getPageCount()-1),disabled:!t.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevrons-right",children:[e.jsx("path",{d:"m6 17 5-5-5-5"}),e.jsx("path",{d:"m13 17 5-5-5-5"})]})]})]})})]})]})})]})]}),e.jsx(q,{open:z,onOpenChange:d,children:e.jsxs(J,{children:[e.jsxs(Q,{children:[e.jsx(X,{children:"Apakah Anda yakin?"}),e.jsxs(Y,{children:["Tindakan ini tidak dapat dibatalkan. Ini akan menghapus produk"," ",e.jsx("span",{className:"font-medium",children:r==null?void 0:r.name})," secara permanen dan menghapus datanya dari server."]})]}),e.jsxs(Z,{children:[e.jsx(ee,{children:"Batal"}),e.jsx(se,{onClick:G,children:"Hapus"})]})]})})]})}export{Ue as default};
